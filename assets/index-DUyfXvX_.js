(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const c of f)if(c.type==="childList")for(const v of c.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function o(f){const c={};return f.integrity&&(c.integrity=f.integrity),f.referrerPolicy&&(c.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?c.credentials="include":f.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(f){if(f.ep)return;f.ep=!0;const c=o(f);fetch(f.href,c)}})();const Ba=!1;var si=Array.isArray,du=Array.prototype.indexOf,_o=Array.from,ei=Object.defineProperty,Rn=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyDescriptors,hu=Object.prototype,vu=Array.prototype,bo=Object.getPrototypeOf,va=Object.isExtensible;function pu(n){return typeof n=="function"}const et=()=>{};function yu(n){return n()}function ti(n){for(var r=0;r<n.length;r++)n[r]()}function La(){var n,r,o=new Promise((u,f)=>{n=u,r=f});return{promise:o,resolve:n,reject:r}}function mu(n,r){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const o=[];for(const u of n)if(o.push(u),o.length===r)break;return o}const We=2,wo=4,ui=8,Xt=16,qt=32,_n=64,xo=128,at=256,ni=512,Ne=1024,tt=2048,Mt=4096,yt=8192,bn=16384,li=32768,fr=65536,pa=1<<17,gu=1<<18,Un=1<<19,Na=1<<20,io=1<<21,ci=1<<22,fn=1<<23,Dt=Symbol("$state"),_u=Symbol("legacy props"),bu=Symbol(""),Kn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Va(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function wu(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function xu(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Eu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ku(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Su(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Cu(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ou(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Pu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Au(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Tu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const fi=1,di=2,Ha=4,Du=8,Iu=16,ju=1,Ku=2,qu=4,Mu=8,Ru=16,Bu=4,Fu=1,Lu=2,Fe=Symbol(),Nu="http://www.w3.org/1999/xhtml";function Vu(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Hu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let $u=!1;function $a(n){return n===this.v}function Ua(n,r){return n!=n?r==r:n!==r||n!==null&&typeof n=="object"||typeof n=="function"}function za(n){return!Ua(n,this.v)}let zn=!1,Uu=!1;function zu(){zn=!0}let Ce=null;function Nn(n){Ce=n}function lt(n,r=!1,o){Ce={p:Ce,c:null,e:null,s:n,x:null,l:zn&&!r?{s:null,u:null,$:[]}:null}}function ct(n){var r=Ce,o=r.e;if(o!==null){r.e=null;for(var u of o)os(u)}return Ce=r.p,{}}function dr(){return!zn||Ce!==null&&Ce.l===null}let qn=[];function Yu(){var n=qn;qn=[],ti(n)}function jt(n){if(qn.length===0){var r=qn;queueMicrotask(()=>{r===qn&&Yu()})}qn.push(n)}const Wu=new WeakMap;function Ya(n){var r=ce;if(r===null)return fe.f|=fn,n;if((r.f&li)===0){if((r.f&xo)===0)throw!r.parent&&n instanceof Error&&Wa(n),n;r.b.error(n)}else Vn(n,r)}function Vn(n,r){for(;r!==null;){if((r.f&xo)!==0)try{r.b.error(n);return}catch(o){n=o}r=r.parent}throw n instanceof Error&&Wa(n),n}function Wa(n){const r=Wu.get(n);r&&(ei(n,"message",{value:r.message}),ei(n,"stack",{value:r.stack}))}const Gr=new Set;let Re=null,ht=null,oo=new Set,zt=[],Eo=null,ao=!1;class kt{current=new Map;#r=new Map;#n=new Set;#d=0;#o=null;#u=[];#i=[];#t=[];#e=[];#a=[];#l=[];skipped_effects=new Set;process(r){zt=[],this.apply();for(const c of r)this.#c(c);if(this.#d===0){var o=ht;this.#f();var u=this.#i,f=this.#t;this.#i=[],this.#t=[],this.#e=[],Re=null,ht=o,ya(u),ya(f),this.#o?.resolve()}else this.#s(this.#i),this.#s(this.#t),this.#s(this.#e);ht=null;for(const c of this.#u)$n(c);this.#u=[]}#c(r){r.f^=Ne;for(var o=r.first;o!==null;){var u=o.f,f=(u&(qt|_n))!==0,c=f&&(u&Ne)!==0,v=c||(u&yt)!==0||this.skipped_effects.has(o);if(!v&&o.fn!==null){f?o.f^=Ne:(u&wo)!==0?this.#t.push(o):(u&Ne)===0&&((u&ci)!==0&&o.b?.is_pending()?this.#u.push(o):gr(o)&&((o.f&Xt)!==0&&this.#e.push(o),$n(o)));var y=o.first;if(y!==null){o=y;continue}}var x=o.parent;for(o=o.next;o===null&&x!==null;)o=x.next,x=x.parent}}#s(r){for(const o of r)((o.f&tt)!==0?this.#a:this.#l).push(o),Ue(o,Ne);r.length=0}capture(r,o){this.#r.has(r)||this.#r.set(r,o),this.current.set(r,r.v),ht?.set(r,r.v)}activate(){Re=this}deactivate(){Re=null,ht=null}flush(){if(zt.length>0){if(this.activate(),Gu(),Re!==null&&Re!==this)return}else this.#d===0&&this.#f();this.deactivate();for(const r of oo)if(oo.delete(r),r(),Re!==null)break}#f(){for(const r of this.#n)r();if(this.#n.clear(),Gr.size>1){this.#r.clear();let r=!0;for(const o of Gr){if(o===this){r=!1;continue}const u=[];for(const[c,v]of this.current){if(o.current.has(c))if(r&&v!==o.current.get(c))o.current.set(c,v);else continue;u.push(c)}if(u.length===0)continue;const f=[...o.current.keys()].filter(c=>!this.current.has(c));if(f.length>0){for(const c of u)Ga(c,f);if(zt.length>0){Re=o,o.apply();for(const c of zt)o.#c(c);zt=[],o.deactivate()}}}Re=null}Gr.delete(this)}increment(){this.#d+=1}decrement(){this.#d-=1;for(const r of this.#a)Ue(r,tt),vn(r);for(const r of this.#l)Ue(r,Mt),vn(r);this.flush()}add_callback(r){this.#n.add(r)}settled(){return(this.#o??=La()).promise}static ensure(){if(Re===null){const r=Re=new kt;Gr.add(Re),kt.enqueue(()=>{Re===r&&r.flush()})}return Re}static enqueue(r){jt(r)}apply(){}}function Gu(){var n=Fn;ao=!0;try{var r=0;for(ba(!0);zt.length>0;){var o=kt.ensure();if(r++>1e3){var u,f;Zu()}o.process(zt),Zt.clear()}}finally{ao=!1,ba(n),Eo=null}}function Zu(){try{Su()}catch(n){Vn(n,Eo)}}let cn=null;function ya(n){var r=n.length;if(r!==0){for(var o=0;o<r;){var u=n[o++];if((u.f&(bn|yt))===0&&gr(u)&&(cn=[],$n(u),u.deps===null&&u.first===null&&u.nodes_start===null&&(u.teardown===null&&u.ac===null?cs(u):u.fn=null),cn?.length>0)){Zt.clear();for(const f of cn)$n(f);cn=[]}}cn=null}}function Ga(n,r){if(n.reactions!==null)for(const o of n.reactions){const u=o.f;(u&We)!==0?Ga(o,r):(u&(ci|Xt))!==0&&Za(o,r)&&(Ue(o,tt),vn(o))}}function Za(n,r){if(n.deps!==null){for(const o of n.deps)if(r.includes(o)||(o.f&We)!==0&&Za(o,r))return!0}return!1}function vn(n){for(var r=Eo=n;r.parent!==null;){r=r.parent;var o=r.f;if(ao&&r===ce&&(o&Xt)!==0)return;if((o&(_n|qt))!==0){if((o&Ne)===0)return;r.f^=Ne}}zt.push(r)}function Xu(n){let r=0,o=pn(0),u;return()=>{dl()&&(G(o),vi(()=>(r===0&&(u=De(()=>n(()=>lr(o)))),r+=1,()=>{jt(()=>{r-=1,r===0&&(u?.(),u=void 0,lr(o))})})))}}var Qu=fr|Un|xo;function Ju(n,r,o){new el(n,r,o)}class el{parent;#r=!1;#n;#d=null;#o;#u;#i;#t=null;#e=null;#a=null;#l=null;#c=0;#s=0;#f=!1;#h=null;#m=()=>{this.#h&&Hn(this.#h,this.#c)};#g=Xu(()=>(this.#h=pn(this.#c),()=>{this.#h=null}));constructor(r,o,u){this.#n=r,this.#o=o,this.#u=u,this.parent=ce.b,this.#r=!!this.#o.pending,this.#i=So(()=>{ce.b=this;{try{this.#t=dt(()=>u(this.#n))}catch(f){this.error(f)}this.#s>0?this.#p():this.#r=!1}},Qu)}#_(){try{this.#t=dt(()=>this.#u(this.#n))}catch(r){this.error(r)}this.#r=!1}#b(){const r=this.#o.pending;r&&(this.#e=dt(()=>r(this.#n)),kt.enqueue(()=>{this.#t=this.#v(()=>(kt.ensure(),dt(()=>this.#u(this.#n)))),this.#s>0?this.#p():(Bn(this.#e,()=>{this.#e=null}),this.#r=!1)}))}is_pending(){return this.#r||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#o.pending}#v(r){var o=ce,u=fe,f=Ce;Ct(this.#i),Ge(this.#i),Nn(this.#i.ctx);try{return r()}catch(c){return Ya(c),null}finally{Ct(o),Ge(u),Nn(f)}}#p(){const r=this.#o.pending;this.#t!==null&&(this.#l=document.createDocumentFragment(),tl(this.#t,this.#l)),this.#e===null&&(this.#e=dt(()=>r(this.#n)))}#y(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(r);return}this.#s+=r,this.#s===0&&(this.#r=!1,this.#e&&Bn(this.#e,()=>{this.#e=null}),this.#l&&(this.#n.before(this.#l),this.#l=null),jt(()=>{kt.ensure().flush()}))}update_pending_count(r){this.#y(r),this.#c+=r,oo.add(this.#m)}get_effect_pending(){return this.#g(),G(this.#h)}error(r){var o=this.#o.onerror;let u=this.#o.failed;if(this.#f||!o&&!u)throw r;this.#t&&(st(this.#t),this.#t=null),this.#e&&(st(this.#e),this.#e=null),this.#a&&(st(this.#a),this.#a=null);var f=!1,c=!1;const v=()=>{if(f){Hu();return}f=!0,c&&Tu(),kt.ensure(),this.#c=0,this.#a!==null&&Bn(this.#a,()=>{this.#a=null}),this.#r=this.has_pending_snippet(),this.#t=this.#v(()=>(this.#f=!1,dt(()=>this.#u(this.#n)))),this.#s>0?this.#p():this.#r=!1};var y=fe;try{Ge(null),c=!0,o?.(r,v),c=!1}catch(x){Vn(x,this.#i&&this.#i.parent)}finally{Ge(y)}u&&jt(()=>{this.#a=this.#v(()=>{this.#f=!0;try{return dt(()=>{u(this.#n,()=>r,()=>v)})}catch(x){return Vn(x,this.#i.parent),null}finally{this.#f=!1}})})}}function tl(n,r){for(var o=n.nodes_start,u=n.nodes_end;o!==null;){var f=o===u?null:yr(o);r.append(o),o=f}}function nl(n,r,o){const u=dr()?hr:vr;if(r.length===0){o(n.map(u));return}var f=Re,c=ce,v=rl();Promise.all(r.map(y=>il(y))).then(y=>{v();try{o([...n.map(u),...y])}catch(x){(c.f&bn)===0&&Vn(x,c)}f?.deactivate(),so()}).catch(y=>{Vn(y,c)})}function rl(){var n=ce,r=fe,o=Ce,u=Re;return function(){Ct(n),Ge(r),Nn(o),u?.activate()}}function so(){Ct(null),Ge(null),Nn(null)}function hr(n){var r=We|tt,o=fe!==null&&(fe.f&We)!==0?fe:null;return ce===null||o!==null&&(o.f&at)!==0?r|=at:ce.f|=Un,{ctx:Ce,deps:null,effects:null,equals:$a,f:r,fn:n,reactions:null,rv:0,v:Fe,wv:0,parent:o??ce,ac:null}}function il(n,r){let o=ce;o===null&&wu();var u=o.b,f=void 0,c=pn(Fe),v=!fe,y=new Map;return pl(()=>{var x=La();f=x.promise;try{Promise.resolve(n()).then(x.resolve,x.reject).then(so)}catch(j){x.reject(j),so()}var k=Re,T=u.is_pending();v&&(u.update_pending_count(1),T||(k.increment(),y.get(k)?.reject(Kn),y.delete(k),y.set(k,x)));const A=(j,q=void 0)=>{if(T||k.activate(),q)q!==Kn&&(c.f|=fn,Hn(c,q));else{(c.f&fn)!==0&&(c.f^=fn),Hn(c,j);for(const[D,M]of y){if(y.delete(D),D===k)break;M.reject(Kn)}}v&&(u.update_pending_count(-1),T||k.decrement())};x.promise.then(A,j=>A(null,j||"unknown"))}),hi(()=>{for(const x of y.values())x.reject(Kn)}),new Promise(x=>{function k(T){function A(){T===f?x(c):k(f)}T.then(A,A)}k(f)})}function ol(n){const r=hr(n);return hs(r),r}function vr(n){const r=hr(n);return r.equals=za,r}function Xa(n){var r=n.effects;if(r!==null){n.effects=null;for(var o=0;o<r.length;o+=1)st(r[o])}}function al(n){for(var r=n.parent;r!==null;){if((r.f&We)===0)return r;r=r.parent}return null}function ko(n){var r,o=ce;Ct(al(n));try{Xa(n),r=ms(n)}finally{Ct(o)}return r}function Qa(n){var r=ko(n);if(n.equals(r)||(n.v=r,n.wv=ps()),!wn)if(ht!==null)ht.set(n,n.v);else{var o=(Gt||(n.f&at)!==0)&&n.deps!==null?Mt:Ne;Ue(n,o)}}const Zt=new Map;function pn(n,r){var o={f:0,v:n,reactions:null,equals:$a,rv:0,wv:0};return o}function Ut(n,r){const o=pn(n);return hs(o),o}function Kt(n,r=!1,o=!0){const u=pn(n);return r||(u.equals=za),zn&&o&&Ce!==null&&Ce.l!==null&&(Ce.l.s??=[]).push(u),u}function ma(n,r){return Le(n,De(()=>G(n))),r}function Le(n,r,o=!1){fe!==null&&(!vt||(fe.f&pa)!==0)&&dr()&&(fe.f&(We|Xt|ci|pa))!==0&&!It?.includes(n)&&Au();let u=o?Mn(r):r;return Hn(n,u)}function Hn(n,r){if(!n.equals(r)){var o=n.v;wn?Zt.set(n,r):Zt.set(n,o),n.v=r;var u=kt.ensure();u.capture(n,o),(n.f&We)!==0&&((n.f&tt)!==0&&ko(n),Ue(n,(n.f&at)===0?Ne:Mt)),n.wv=ps(),Ja(n,tt),dr()&&ce!==null&&(ce.f&Ne)!==0&&(ce.f&(qt|_n))===0&&(rt===null?ml([n]):rt.push(n))}return r}function lr(n){Le(n,n.v+1)}function Ja(n,r){var o=n.reactions;if(o!==null)for(var u=dr(),f=o.length,c=0;c<f;c++){var v=o[c],y=v.f;if(!(!u&&v===ce)){var x=(y&tt)===0;x&&Ue(v,r),(y&We)!==0?Ja(v,Mt):x&&((y&Xt)!==0&&cn!==null&&cn.push(v),vn(v))}}}function Mn(n){if(typeof n!="object"||n===null||Dt in n)return n;const r=bo(n);if(r!==hu&&r!==vu)return n;var o=new Map,u=si(n),f=Ut(0),c=dn,v=y=>{if(dn===c)return y();var x=fe,k=dn;Ge(null),xa(c);var T=y();return Ge(x),xa(k),T};return u&&o.set("length",Ut(n.length)),new Proxy(n,{defineProperty(y,x,k){(!("value"in k)||k.configurable===!1||k.enumerable===!1||k.writable===!1)&&Ou();var T=o.get(x);return T===void 0?T=v(()=>{var A=Ut(k.value);return o.set(x,A),A}):Le(T,k.value,!0),!0},deleteProperty(y,x){var k=o.get(x);if(k===void 0){if(x in y){const T=v(()=>Ut(Fe));o.set(x,T),lr(f)}}else Le(k,Fe),lr(f);return!0},get(y,x,k){if(x===Dt)return n;var T=o.get(x),A=x in y;if(T===void 0&&(!A||Rn(y,x)?.writable)&&(T=v(()=>{var q=Mn(A?y[x]:Fe),D=Ut(q);return D}),o.set(x,T)),T!==void 0){var j=G(T);return j===Fe?void 0:j}return Reflect.get(y,x,k)},getOwnPropertyDescriptor(y,x){var k=Reflect.getOwnPropertyDescriptor(y,x);if(k&&"value"in k){var T=o.get(x);T&&(k.value=G(T))}else if(k===void 0){var A=o.get(x),j=A?.v;if(A!==void 0&&j!==Fe)return{enumerable:!0,configurable:!0,value:j,writable:!0}}return k},has(y,x){if(x===Dt)return!0;var k=o.get(x),T=k!==void 0&&k.v!==Fe||Reflect.has(y,x);if(k!==void 0||ce!==null&&(!T||Rn(y,x)?.writable)){k===void 0&&(k=v(()=>{var j=T?Mn(y[x]):Fe,q=Ut(j);return q}),o.set(x,k));var A=G(k);if(A===Fe)return!1}return T},set(y,x,k,T){var A=o.get(x),j=x in y;if(u&&x==="length")for(var q=k;q<A.v;q+=1){var D=o.get(q+"");D!==void 0?Le(D,Fe):q in y&&(D=v(()=>Ut(Fe)),o.set(q+"",D))}if(A===void 0)(!j||Rn(y,x)?.writable)&&(A=v(()=>Ut(void 0)),Le(A,Mn(k)),o.set(x,A));else{j=A.v!==Fe;var M=v(()=>Mn(k));Le(A,M)}var $=Reflect.getOwnPropertyDescriptor(y,x);if($?.set&&$.set.call(T,k),!j){if(u&&typeof x=="string"){var z=o.get("length"),ee=Number(x);Number.isInteger(ee)&&ee>=z.v&&Le(z,ee+1)}lr(f)}return!0},ownKeys(y){G(f);var x=Reflect.ownKeys(y).filter(A=>{var j=o.get(A);return j===void 0||j.v!==Fe});for(var[k,T]of o)T.v!==Fe&&!(k in y)&&x.push(k);return x},setPrototypeOf(){Pu()}})}function ga(n){try{if(n!==null&&typeof n=="object"&&Dt in n)return n[Dt]}catch{}return n}function sl(n,r){return Object.is(ga(n),ga(r))}var _a,es,ts,ns;function ul(){if(_a===void 0){_a=window,es=/Firefox/.test(navigator.userAgent);var n=Element.prototype,r=Node.prototype,o=Text.prototype;ts=Rn(r,"firstChild").get,ns=Rn(r,"nextSibling").get,va(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),va(o)&&(o.__t=void 0)}}function pr(n=""){return document.createTextNode(n)}function Wt(n){return ts.call(n)}function yr(n){return ns.call(n)}function te(n,r){return Wt(n)}function it(n,r=!1){{var o=Wt(n);return o instanceof Comment&&o.data===""?yr(o):o}}function _e(n,r=1,o=!1){let u=n;for(;r--;)u=yr(u);return u}function ll(n){n.textContent=""}function rs(){return!1}function cl(n,r){if(r){const o=document.body;n.autofocus=!0,jt(()=>{document.activeElement===o&&n.focus()})}}function mr(n){var r=fe,o=ce;Ge(null),Ct(null);try{return n()}finally{Ge(r),Ct(o)}}function is(n){ce===null&&fe===null&&ku(),fe!==null&&(fe.f&at)!==0&&ce===null&&Eu(),wn&&xu()}function fl(n,r){var o=r.last;o===null?r.last=r.first=n:(o.next=n,n.prev=o,r.last=n)}function Ot(n,r,o,u=!0){var f=ce;f!==null&&(f.f&yt)!==0&&(n|=yt);var c={ctx:Ce,deps:null,nodes_start:null,nodes_end:null,f:n|tt,first:null,fn:r,last:null,next:null,parent:f,b:f&&f.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(o)try{$n(c),c.f|=li}catch(x){throw st(c),x}else r!==null&&vn(c);if(u){var v=c;if(o&&v.deps===null&&v.teardown===null&&v.nodes_start===null&&v.first===v.last&&(v.f&Un)===0&&(v=v.first),v!==null&&(v.parent=f,f!==null&&fl(v,f),fe!==null&&(fe.f&We)!==0&&(n&_n)===0)){var y=fe;(y.effects??=[]).push(v)}}return c}function dl(){return fe!==null&&!vt}function hi(n){const r=Ot(ui,null,!1);return Ue(r,Ne),r.teardown=n,r}function uo(n){is();var r=ce.f,o=!fe&&(r&qt)!==0&&(r&li)===0;if(o){var u=Ce;(u.e??=[]).push(n)}else return os(n)}function os(n){return Ot(wo|Na,n,!1)}function hl(n){return is(),Ot(ui|Na,n,!0)}function vl(n){kt.ensure();const r=Ot(_n|Un,n,!0);return(o={})=>new Promise(u=>{o.outro?Bn(r,()=>{st(r),u(void 0)}):(st(r),u(void 0))})}function as(n){return Ot(wo,n,!1)}function yn(n,r){var o=Ce,u={effect:null,ran:!1,deps:n};o.l.$.push(u),u.effect=vi(()=>{n(),!u.ran&&(u.ran=!0,De(r))})}function Yn(){var n=Ce;vi(()=>{for(var r of n.l.$){r.deps();var o=r.effect;(o.f&Ne)!==0&&Ue(o,Mt),gr(o)&&$n(o),r.ran=!1}})}function pl(n){return Ot(ci|Un,n,!0)}function vi(n,r=0){return Ot(ui|r,n,!0)}function je(n,r=[],o=[]){nl(r,o,u=>{Ot(ui,()=>n(...u.map(G)),!0)})}function So(n,r=0){var o=Ot(Xt|r,n,!0);return o}function dt(n,r=!0){return Ot(qt|Un,n,!0,r)}function ss(n){var r=n.teardown;if(r!==null){const o=wn,u=fe;wa(!0),Ge(null);try{r.call(null)}finally{wa(o),Ge(u)}}}function us(n,r=!1){var o=n.first;for(n.first=n.last=null;o!==null;){const f=o.ac;f!==null&&mr(()=>{f.abort(Kn)});var u=o.next;(o.f&_n)!==0?o.parent=null:st(o,r),o=u}}function yl(n){for(var r=n.first;r!==null;){var o=r.next;(r.f&qt)===0&&st(r),r=o}}function st(n,r=!0){var o=!1;(r||(n.f&gu)!==0)&&n.nodes_start!==null&&n.nodes_end!==null&&(ls(n.nodes_start,n.nodes_end),o=!0),us(n,r&&!o),ri(n,0),Ue(n,bn);var u=n.transitions;if(u!==null)for(const c of u)c.stop();ss(n);var f=n.parent;f!==null&&f.first!==null&&cs(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function ls(n,r){for(;n!==null;){var o=n===r?null:yr(n);n.remove(),n=o}}function cs(n){var r=n.parent,o=n.prev,u=n.next;o!==null&&(o.next=u),u!==null&&(u.prev=o),r!==null&&(r.first===n&&(r.first=u),r.last===n&&(r.last=o))}function Bn(n,r){var o=[];Co(n,o,!0),fs(o,()=>{st(n),r&&r()})}function fs(n,r){var o=n.length;if(o>0){var u=()=>--o||r();for(var f of n)f.out(u)}else r()}function Co(n,r,o){if((n.f&yt)===0){if(n.f^=yt,n.transitions!==null)for(const v of n.transitions)(v.is_global||o)&&r.push(v);for(var u=n.first;u!==null;){var f=u.next,c=(u.f&fr)!==0||(u.f&qt)!==0;Co(u,r,c?o:!1),u=f}}}function Oo(n){ds(n,!0)}function ds(n,r){if((n.f&yt)!==0){n.f^=yt,(n.f&Ne)===0&&(Ue(n,tt),vn(n));for(var o=n.first;o!==null;){var u=o.next,f=(o.f&fr)!==0||(o.f&qt)!==0;ds(o,f?r:!1),o=u}if(n.transitions!==null)for(const c of n.transitions)(c.is_global||r)&&c.in()}}let Fn=!1;function ba(n){Fn=n}let wn=!1;function wa(n){wn=n}let fe=null,vt=!1;function Ge(n){fe=n}let ce=null;function Ct(n){ce=n}let It=null;function hs(n){fe!==null&&(It===null?It=[n]:It.push(n))}let Ye=null,Je=0,rt=null;function ml(n){rt=n}let vs=1,cr=0,dn=cr;function xa(n){dn=n}let Gt=!1;function ps(){return++vs}function gr(n){var r=n.f;if((r&tt)!==0)return!0;if((r&Mt)!==0){var o=n.deps,u=(r&at)!==0;if(o!==null){var f,c,v=(r&ni)!==0,y=u&&ce!==null&&!Gt,x=o.length;if((v||y)&&(ce===null||(ce.f&bn)===0)){var k=n,T=k.parent;for(f=0;f<x;f++)c=o[f],(v||!c?.reactions?.includes(k))&&(c.reactions??=[]).push(k);v&&(k.f^=ni),y&&T!==null&&(T.f&at)===0&&(k.f^=at)}for(f=0;f<x;f++)if(c=o[f],gr(c)&&Qa(c),c.wv>n.wv)return!0}(!u||ce!==null&&!Gt)&&Ue(n,Ne)}return!1}function ys(n,r,o=!0){var u=n.reactions;if(u!==null&&!It?.includes(n))for(var f=0;f<u.length;f++){var c=u[f];(c.f&We)!==0?ys(c,r,!1):r===c&&(o?Ue(c,tt):(c.f&Ne)!==0&&Ue(c,Mt),vn(c))}}function ms(n){var r=Ye,o=Je,u=rt,f=fe,c=Gt,v=It,y=Ce,x=vt,k=dn,T=n.f;Ye=null,Je=0,rt=null,Gt=(T&at)!==0&&(vt||!Fn||fe===null),fe=(T&(qt|_n))===0?n:null,It=null,Nn(n.ctx),vt=!1,dn=++cr,n.ac!==null&&(mr(()=>{n.ac.abort(Kn)}),n.ac=null);try{n.f|=io;var A=n.fn,j=A(),q=n.deps;if(Ye!==null){var D;if(ri(n,Je),q!==null&&Je>0)for(q.length=Je+Ye.length,D=0;D<Ye.length;D++)q[Je+D]=Ye[D];else n.deps=q=Ye;if(!Gt||(T&We)!==0&&n.reactions!==null)for(D=Je;D<q.length;D++)(q[D].reactions??=[]).push(n)}else q!==null&&Je<q.length&&(ri(n,Je),q.length=Je);if(dr()&&rt!==null&&!vt&&q!==null&&(n.f&(We|Mt|tt))===0)for(D=0;D<rt.length;D++)ys(rt[D],n);return f!==null&&f!==n&&(cr++,rt!==null&&(u===null?u=rt:u.push(...rt))),(n.f&fn)!==0&&(n.f^=fn),j}catch(M){return Ya(M)}finally{n.f^=io,Ye=r,Je=o,rt=u,fe=f,Gt=c,It=v,Nn(y),vt=x,dn=k}}function gl(n,r){let o=r.reactions;if(o!==null){var u=du.call(o,n);if(u!==-1){var f=o.length-1;f===0?o=r.reactions=null:(o[u]=o[f],o.pop())}}o===null&&(r.f&We)!==0&&(Ye===null||!Ye.includes(r))&&(Ue(r,Mt),(r.f&(at|ni))===0&&(r.f^=ni),Xa(r),ri(r,0))}function ri(n,r){var o=n.deps;if(o!==null)for(var u=r;u<o.length;u++)gl(n,o[u])}function $n(n){var r=n.f;if((r&bn)===0){Ue(n,Ne);var o=ce,u=Fn;ce=n,Fn=!0;try{(r&Xt)!==0?yl(n):us(n),ss(n);var f=ms(n);n.teardown=typeof f=="function"?f:null,n.wv=vs;var c;Ba&&Uu&&(n.f&tt)!==0&&n.deps}finally{Fn=u,ce=o}}}function G(n){var r=n.f,o=(r&We)!==0;if(fe!==null&&!vt){var u=ce!==null&&(ce.f&bn)!==0;if(!u&&!It?.includes(n)){var f=fe.deps;if((fe.f&io)!==0)n.rv<cr&&(n.rv=cr,Ye===null&&f!==null&&f[Je]===n?Je++:Ye===null?Ye=[n]:(!Gt||!Ye.includes(n))&&Ye.push(n));else{(fe.deps??=[]).push(n);var c=n.reactions;c===null?n.reactions=[fe]:c.includes(fe)||c.push(fe)}}}else if(o&&n.deps===null&&n.effects===null){var v=n,y=v.parent;y!==null&&(y.f&at)===0&&(v.f^=at)}if(wn){if(Zt.has(n))return Zt.get(n);if(o){v=n;var x=v.v;return((v.f&Ne)===0&&v.reactions!==null||gs(v))&&(x=ko(v)),Zt.set(v,x),x}}else if(o){if(v=n,ht?.has(v))return ht.get(v);gr(v)&&Qa(v)}if(ht?.has(n))return ht.get(n);if((n.f&fn)!==0)throw n.v;return n.v}function gs(n){if(n.v===Fe)return!0;if(n.deps===null)return!1;for(const r of n.deps)if(Zt.has(r)||(r.f&We)!==0&&gs(r))return!0;return!1}function De(n){var r=vt;try{return vt=!0,n()}finally{vt=r}}const _l=-7169;function Ue(n,r){n.f=n.f&_l|r}function St(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Dt in n)lo(n);else if(!Array.isArray(n))for(let r in n){const o=n[r];typeof o=="object"&&o&&Dt in o&&lo(o)}}}function lo(n,r=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!r.has(n)){r.add(n),n instanceof Date&&n.getTime();for(let u in n)try{lo(n[u],r)}catch{}const o=bo(n);if(o!==Object.prototype&&o!==Array.prototype&&o!==Map.prototype&&o!==Set.prototype&&o!==Date.prototype){const u=Fa(o);for(let f in u){const c=u[f].get;if(c)try{c.call(n)}catch{}}}}}const bl=["touchstart","touchmove"];function wl(n){return bl.includes(n)}const xl=new Set,Ea=new Set;function El(n,r,o,u={}){function f(c){if(u.capture||ur.call(r,c),!c.cancelBubble)return mr(()=>o?.call(this,c))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?jt(()=>{r.addEventListener(n,f,u)}):r.addEventListener(n,f,u),f}function pt(n,r,o,u,f){var c={capture:u,passive:f},v=El(n,r,o,c);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&hi(()=>{r.removeEventListener(n,v,c)})}let ka=null;function ur(n){var r=this,o=r.ownerDocument,u=n.type,f=n.composedPath?.()||[],c=f[0]||n.target;ka=n;var v=0,y=ka===n&&n.__root;if(y){var x=f.indexOf(y);if(x!==-1&&(r===document||r===window)){n.__root=r;return}var k=f.indexOf(r);if(k===-1)return;x<=k&&(v=x)}if(c=f[v]||n.target,c!==r){ei(n,"currentTarget",{configurable:!0,get(){return c||o}});var T=fe,A=ce;Ge(null),Ct(null);try{for(var j,q=[];c!==null;){var D=c.assignedSlot||c.parentNode||c.host||null;try{var M=c["__"+u];if(M!=null&&(!c.disabled||n.target===c))if(si(M)){var[$,...z]=M;$.apply(c,[n,...z])}else M.call(c,n)}catch(ee){j?q.push(ee):j=ee}if(n.cancelBubble||D===r||D===null)break;c=D}if(j){for(let ee of q)queueMicrotask(()=>{throw ee});throw j}}finally{n.__root=r,delete n.currentTarget,Ge(T),Ct(A)}}}function _s(n){var r=document.createElement("template");return r.innerHTML=n.replaceAll("<!>","<!---->"),r.content}function ii(n,r){var o=ce;o.nodes_start===null&&(o.nodes_start=n,o.nodes_end=r)}function xe(n,r){var o=(r&Fu)!==0,u=(r&Lu)!==0,f,c=!n.startsWith("<!>");return()=>{f===void 0&&(f=_s(c?n:"<!>"+n),o||(f=Wt(f)));var v=u||es?document.importNode(f,!0):f.cloneNode(!0);if(o){var y=Wt(v),x=v.lastChild;ii(y,x)}else ii(v,v);return v}}function hn(){var n=document.createDocumentFragment(),r=document.createComment(""),o=pr();return n.append(r,o),ii(r,o),n}function he(n,r){n!==null&&n.before(r)}let co=!0;function ut(n,r){var o=r==null?"":typeof r=="object"?r+"":r;o!==(n.__t??=n.nodeValue)&&(n.__t=o,n.nodeValue=o+"")}function kl(n,r){return Sl(n,r)}const In=new Map;function Sl(n,{target:r,anchor:o,props:u={},events:f,context:c,intro:v=!0}){ul();var y=new Set,x=A=>{for(var j=0;j<A.length;j++){var q=A[j];if(!y.has(q)){y.add(q);var D=wl(q);r.addEventListener(q,ur,{passive:D});var M=In.get(q);M===void 0?(document.addEventListener(q,ur,{passive:D}),In.set(q,1)):In.set(q,M+1)}}};x(_o(xl)),Ea.add(x);var k=void 0,T=vl(()=>{var A=o??r.appendChild(pr());return Ju(A,{pending:()=>{}},j=>{if(c){lt({});var q=Ce;q.c=c}f&&(u.$$events=f),co=v,k=n(j,u)||{},co=!0,c&&ct()}),()=>{for(var j of y){r.removeEventListener(j,ur);var q=In.get(j);--q===0?(document.removeEventListener(j,ur),In.delete(j)):In.set(j,q)}Ea.delete(x),A!==o&&A.parentNode?.removeChild(A)}});return Cl.set(k,T),k}let Cl=new WeakMap;function ot(n,r,o=!1){var u=n,f=null,c=null,v=Fe,y=o?fr:0,x=!1;const k=(q,D=!0)=>{x=!0,j(D,q)};var T=null;function A(){T!==null&&(T.lastChild.remove(),u.before(T),T=null);var q=v?f:c,D=v?c:f;q&&Oo(q),D&&Bn(D,()=>{v?c=null:f=null})}const j=(q,D)=>{if(v!==(v=q)){var M=rs(),$=u;if(M&&(T=document.createDocumentFragment(),T.append($=pr())),v?f??=D&&dt(()=>D($)):c??=D&&dt(()=>D($)),M){var z=Re,ee=v?f:c,Q=v?c:f;ee&&z.skipped_effects.delete(ee),Q&&z.skipped_effects.add(Q),z.add_callback(A)}else A()}};So(()=>{x=!1,r(k),x||j(null,null)},y)}function mn(n,r){return r}function Ol(n,r,o){for(var u=n.items,f=[],c=r.length,v=0;v<c;v++)Co(r[v].e,f,!0);var y=c>0&&f.length===0&&o!==null;if(y){var x=o.parentNode;ll(x),x.append(o),u.clear(),xt(n,r[0].prev,r[c-1].next)}fs(f,()=>{for(var k=0;k<c;k++){var T=r[k];y||(u.delete(T.k),xt(n,T.prev,T.next)),st(T.e,!y)}})}function gn(n,r,o,u,f,c=null){var v=n,y={flags:r,items:new Map,first:null},x=(r&Ha)!==0;if(x){var k=n;v=k.appendChild(pr())}var T=null,A=!1,j=new Map,q=vr(()=>{var z=o();return si(z)?z:z==null?[]:_o(z)}),D,M;function $(){Pl(M,D,y,j,v,f,r,u,o),c!==null&&(D.length===0?T?Oo(T):T=dt(()=>c(v)):T!==null&&Bn(T,()=>{T=null}))}So(()=>{M??=ce,D=G(q);var z=D.length;if(!(A&&z===0)){A=z===0;var ee,Q,oe,ue;if(rs()){var Z=new Set,Y=Re;for(Q=0;Q<z;Q+=1){oe=D[Q],ue=u(oe,Q);var be=y.items.get(ue)??j.get(ue);be?(r&(fi|di))!==0&&bs(be,oe,Q,r):(ee=ws(null,y,null,null,oe,ue,Q,f,r,o,!0),j.set(ue,ee)),Z.add(ue)}for(const[Ee,Ke]of y.items)Z.has(Ee)||Y.skipped_effects.add(Ke.e);Y.add_callback($)}else $();G(q)}})}function Pl(n,r,o,u,f,c,v,y,x){var k=(v&Du)!==0,T=(v&(fi|di))!==0,A=r.length,j=o.items,q=o.first,D=q,M,$=null,z,ee=[],Q=[],oe,ue,Z,Y;if(k)for(Y=0;Y<A;Y+=1)oe=r[Y],ue=y(oe,Y),Z=j.get(ue),Z!==void 0&&(Z.a?.measure(),(z??=new Set).add(Z));for(Y=0;Y<A;Y+=1){if(oe=r[Y],ue=y(oe,Y),Z=j.get(ue),Z===void 0){var be=u.get(ue);if(be!==void 0){u.delete(ue),j.set(ue,be);var Ee=$?$.next:D;xt(o,$,be),xt(o,be,Ee),to(be,Ee,f),$=be}else{var Ke=D?D.e.nodes_start:f;$=ws(Ke,o,$,$===null?o.first:$.next,oe,ue,Y,c,v,x)}j.set(ue,$),ee=[],Q=[],D=$.next;continue}if(T&&bs(Z,oe,Y,v),(Z.e.f&yt)!==0&&(Oo(Z.e),k&&(Z.a?.unfix(),(z??=new Set).delete(Z))),Z!==D){if(M!==void 0&&M.has(Z)){if(ee.length<Q.length){var Be=Q[0],ie;$=Be.prev;var me=ee[0],X=ee[ee.length-1];for(ie=0;ie<ee.length;ie+=1)to(ee[ie],Be,f);for(ie=0;ie<Q.length;ie+=1)M.delete(Q[ie]);xt(o,me.prev,X.next),xt(o,$,me),xt(o,X,Be),D=Be,$=X,Y-=1,ee=[],Q=[]}else M.delete(Z),to(Z,D,f),xt(o,Z.prev,Z.next),xt(o,Z,$===null?o.first:$.next),xt(o,$,Z),$=Z;continue}for(ee=[],Q=[];D!==null&&D.k!==ue;)(D.e.f&yt)===0&&(M??=new Set).add(D),Q.push(D),D=D.next;if(D===null)continue;Z=D}ee.push(Z),$=Z,D=Z.next}if(D!==null||M!==void 0){for(var ye=M===void 0?[]:_o(M);D!==null;)(D.e.f&yt)===0&&ye.push(D),D=D.next;var ve=ye.length;if(ve>0){var Oe=(v&Ha)!==0&&A===0?f:null;if(k){for(Y=0;Y<ve;Y+=1)ye[Y].a?.measure();for(Y=0;Y<ve;Y+=1)ye[Y].a?.fix()}Ol(o,ye,Oe)}}k&&jt(()=>{if(z!==void 0)for(Z of z)Z.a?.apply()}),n.first=o.first&&o.first.e,n.last=$&&$.e;for(var ge of u.values())st(ge.e);u.clear()}function bs(n,r,o,u){(u&fi)!==0&&Hn(n.v,r),(u&di)!==0?Hn(n.i,o):n.i=o}function ws(n,r,o,u,f,c,v,y,x,k,T){var A=(x&fi)!==0,j=(x&Iu)===0,q=A?j?Kt(f,!1,!1):pn(f):f,D=(x&di)===0?v:pn(v),M={i:D,v:q,k:c,a:null,e:null,prev:o,next:u};try{if(n===null){var $=document.createDocumentFragment();$.append(n=pr())}return M.e=dt(()=>y(n,q,D,k),$u),M.e.prev=o&&o.e,M.e.next=u&&u.e,o===null?T||(r.first=M):(o.next=M,o.e.next=M.e),u!==null&&(u.prev=M,u.e.prev=M.e),M}finally{}}function to(n,r,o){for(var u=n.next?n.next.e.nodes_start:o,f=r?r.e.nodes_start:o,c=n.e.nodes_start;c!==null&&c!==u;){var v=yr(c);f.before(c),c=v}}function xt(n,r,o){r===null?n.first=o:(r.next=o,r.e.next=o&&o.e),o!==null&&(o.prev=r,o.e.prev=r&&r.e)}function Al(n,r,o=!1,u=!1,f=!1){var c=n,v="";je(()=>{var y=ce;if(v!==(v=r()??"")&&(y.nodes_start!==null&&(ls(y.nodes_start,y.nodes_end),y.nodes_start=y.nodes_end=null),v!=="")){var x=v+"";o?x=`<svg>${x}</svg>`:u&&(x=`<math>${x}</math>`);var k=_s(x);if((o||u)&&(k=Wt(k)),ii(Wt(k),k.lastChild),o||u)for(;Wt(k);)c.before(Wt(k));else c.before(k)}})}function xs(n,r,o,u,f){var c=r.$$slots?.[o],v=!1;c===!0&&(c=r.children,v=!0),c===void 0||c(n,v?()=>u:u)}function Es(n){var r,o,u="";if(typeof n=="string"||typeof n=="number")u+=n;else if(typeof n=="object")if(Array.isArray(n)){var f=n.length;for(r=0;r<f;r++)n[r]&&(o=Es(n[r]))&&(u&&(u+=" "),u+=o)}else for(o in n)n[o]&&(u&&(u+=" "),u+=o);return u}function Tl(){for(var n,r,o=0,u="",f=arguments.length;o<f;o++)(n=arguments[o])&&(r=Es(n))&&(u&&(u+=" "),u+=r);return u}function Dl(n){return typeof n=="object"?Tl(n):n??""}const Sa=[...` 	
\r\f \v\uFEFF`];function Il(n,r,o){var u=n==null?"":""+n;if(r&&(u=u?u+" "+r:r),o){for(var f in o)if(o[f])u=u?u+" "+f:f;else if(u.length)for(var c=f.length,v=0;(v=u.indexOf(f,v))>=0;){var y=v+c;(v===0||Sa.includes(u[v-1]))&&(y===u.length||Sa.includes(u[y]))?u=(v===0?"":u.substring(0,v))+u.substring(y+1):v=y}}return u===""?null:u}function Ca(n,r=!1){var o=r?" !important;":";",u="";for(var f in n){var c=n[f];c!=null&&c!==""&&(u+=" "+f+": "+c+o)}return u}function no(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function jl(n,r){if(r){var o="",u,f;if(Array.isArray(r)?(u=r[0],f=r[1]):u=r,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var c=!1,v=0,y=!1,x=[];u&&x.push(...Object.keys(u).map(no)),f&&x.push(...Object.keys(f).map(no));var k=0,T=-1;const M=n.length;for(var A=0;A<M;A++){var j=n[A];if(y?j==="/"&&n[A-1]==="*"&&(y=!1):c?c===j&&(c=!1):j==="/"&&n[A+1]==="*"?y=!0:j==='"'||j==="'"?c=j:j==="("?v++:j===")"&&v--,!y&&c===!1&&v===0){if(j===":"&&T===-1)T=A;else if(j===";"||A===M-1){if(T!==-1){var q=no(n.substring(k,T).trim());if(!x.includes(q)){j!==";"&&A++;var D=n.substring(k,A).trim();o+=" "+D+";"}}k=A+1,T=-1}}}}return u&&(o+=Ca(u)),f&&(o+=Ca(f,!0)),o=o.trim(),o===""?null:o}return n==null?null:String(n)}function _r(n,r,o,u,f,c){var v=n.__className;if(v!==o||v===void 0){var y=Il(o,u,c);y==null?n.removeAttribute("class"):n.className=y,n.__className=o}else if(c&&f!==c)for(var x in c){var k=!!c[x];(f==null||k!==!!f[x])&&n.classList.toggle(x,k)}return c}function ro(n,r={},o,u){for(var f in o){var c=o[f];r[f]!==c&&(o[f]==null?n.style.removeProperty(f):n.style.setProperty(f,c,u))}}function fo(n,r,o,u){var f=n.__style;if(f!==r){var c=jl(r,u);c==null?n.removeAttribute("style"):n.style.cssText=c,n.__style=r}else u&&(Array.isArray(u)?(ro(n,o?.[0],u[0]),ro(n,o?.[1],u[1],"important")):ro(n,o,u));return u}function ho(n,r,o=!1){if(n.multiple){if(r==null)return;if(!si(r))return Vu();for(var u of n.options)u.selected=r.includes(Pa(u));return}for(u of n.options){var f=Pa(u);if(sl(f,r)){u.selected=!0;return}}(!o||r!==void 0)&&(n.selectedIndex=-1)}function Oa(n){var r=new MutationObserver(()=>{ho(n,n.__value)});r.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),hi(()=>{r.disconnect()})}function Pa(n){return"__value"in n?n.__value:n.value}const Kl=Symbol("is custom element"),ql=Symbol("is html");function Aa(n,r,o,u){var f=Ml(n);f[r]!==(f[r]=o)&&(r==="loading"&&(n[bu]=o),o==null?n.removeAttribute(r):typeof o!="string"&&Rl(n).includes(r)?n[r]=o:n.setAttribute(r,o))}function Ml(n){return n.__attributes??={[Kl]:n.nodeName.includes("-"),[ql]:n.namespaceURI===Nu}}var Ta=new Map;function Rl(n){var r=n.getAttribute("is")||n.nodeName,o=Ta.get(r);if(o)return o;Ta.set(r,o=[]);for(var u,f=n,c=Element.prototype;c!==f;){u=Fa(f);for(var v in u)u[v].set&&o.push(v);f=bo(f)}return o}const Bl=()=>performance.now(),Et={tick:n=>requestAnimationFrame(n),now:()=>Bl(),tasks:new Set};function ks(){const n=Et.now();Et.tasks.forEach(r=>{r.c(n)||(Et.tasks.delete(r),r.f())}),Et.tasks.size!==0&&Et.tick(ks)}function Ss(n){let r;return Et.tasks.size===0&&Et.tick(ks),{promise:new Promise(o=>{Et.tasks.add(r={c:n,f:o})}),abort(){Et.tasks.delete(r)}}}function Zr(n,r){mr(()=>{n.dispatchEvent(new CustomEvent(r))})}function Fl(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const r=n.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function Da(n){const r={},o=n.split(";");for(const u of o){const[f,c]=u.split(":");if(!f||c===void 0)break;const v=Fl(f.trim());r[v]=c.trim()}return r}const Ll=n=>n;function oi(n,r,o,u){var f=(n&Bu)!==0,c="both",v,y=r.inert,x=r.style.overflow,k,T;function A(){return mr(()=>v??=o()(r,u?.()??{},{direction:c}))}var j={is_global:f,in(){r.inert=y,Zr(r,"introstart"),k=vo(r,A(),T,1,()=>{Zr(r,"introend"),k?.abort(),k=v=void 0,r.style.overflow=x})},out($){r.inert=!0,Zr(r,"outrostart"),T=vo(r,A(),k,0,()=>{Zr(r,"outroend"),$?.()})},stop:()=>{k?.abort(),T?.abort()}},q=ce;if((q.transitions??=[]).push(j),co){var D=f;if(!D){for(var M=q.parent;M&&(M.f&fr)!==0;)for(;(M=M.parent)&&(M.f&Xt)===0;);D=!M||(M.f&li)!==0}D&&as(()=>{De(()=>j.in())})}}function vo(n,r,o,u,f){var c=u===1;if(pu(r)){var v,y=!1;return jt(()=>{if(!y){var $=r({direction:c?"in":"out"});v=vo(n,$,o,u,f)}}),{abort:()=>{y=!0,v?.abort()},deactivate:()=>v.deactivate(),reset:()=>v.reset(),t:()=>v.t()}}if(o?.deactivate(),!r?.duration)return f(),{abort:et,deactivate:et,reset:et,t:()=>u};const{delay:x=0,css:k,tick:T,easing:A=Ll}=r;var j=[];if(c&&o===void 0&&(T&&T(0,1),k)){var q=Da(k(0,1));j.push(q,q)}var D=()=>1-u,M=n.animate(j,{duration:x,fill:"forwards"});return M.onfinish=()=>{M.cancel();var $=o?.t()??1-u;o?.abort();var z=u-$,ee=r.duration*Math.abs(z),Q=[];if(ee>0){var oe=!1;if(k)for(var ue=Math.ceil(ee/16.666666666666668),Z=0;Z<=ue;Z+=1){var Y=$+z*A(Z/ue),be=Da(k(Y,1-Y));Q.push(be),oe||=be.overflow==="hidden"}oe&&(n.style.overflow="hidden"),D=()=>{var Ee=M.currentTime;return $+z*A(Ee/ee)},T&&Ss(()=>{if(M.playState!=="running")return!1;var Ee=D();return T(Ee,1-Ee),!0})}M=n.animate(Q,{duration:ee,fill:"forwards"}),M.onfinish=()=>{D=()=>u,T?.(u,1-u),f()}},{abort:()=>{M&&(M.cancel(),M.effect=null,M.onfinish=et)},deactivate:()=>{f=et},reset:()=>{u===0&&T?.(1,0)},t:()=>D()}}function Ia(n,r){return n===r||n?.[Dt]===r}function Cs(n={},r,o,u){return as(()=>{var f,c;return vi(()=>{f=c,c=[],De(()=>{n!==o(...c)&&(r(n,...c),f&&Ia(o(...f),n)&&r(null,...f))})}),()=>{jt(()=>{c&&Ia(o(...c),n)&&r(null,...c)})}}),n}function xn(n=!1){const r=Ce,o=r.l.u;if(!o)return;let u=()=>St(r.s);if(n){let f=0,c={};const v=hr(()=>{let y=!1;const x=r.s;for(const k in x)x[k]!==c[k]&&(c[k]=x[k],y=!0);return y&&f++,f});u=()=>G(v)}o.b.length&&hl(()=>{ja(r,u),ti(o.b)}),uo(()=>{const f=De(()=>o.m.map(yu));return()=>{for(const c of f)typeof c=="function"&&c()}}),o.a.length&&uo(()=>{ja(r,u),ti(o.a)})}function ja(n,r){if(n.l.s)for(const o of n.l.s)G(o);r()}function Po(n,r,o){if(n==null)return r(void 0),o&&o(void 0),et;const u=De(()=>n.subscribe(r,o));return u.unsubscribe?()=>u.unsubscribe():u}const jn=[];function Ao(n,r){return{subscribe:pi(n,r).subscribe}}function pi(n,r=et){let o=null;const u=new Set;function f(y){if(Ua(n,y)&&(n=y,o)){const x=!jn.length;for(const k of u)k[1](),jn.push(k,n);if(x){for(let k=0;k<jn.length;k+=2)jn[k][0](jn[k+1]);jn.length=0}}}function c(y){f(y(n))}function v(y,x=et){const k=[y,x];return u.add(k),u.size===1&&(o=r(f,c)||et),y(n),()=>{u.delete(k),u.size===0&&o&&(o(),o=null)}}return{set:f,update:c,subscribe:v}}function br(n,r,o){const u=!Array.isArray(n),f=u?[n]:n;if(!f.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=r.length<2;return Ao(o,(v,y)=>{let x=!1;const k=[];let T=0,A=et;const j=()=>{if(T)return;A();const D=r(u?k[0]:k,v,y);c?v(D):A=typeof D=="function"?D:et},q=f.map((D,M)=>Po(D,$=>{k[M]=$,T&=~(1<<M),x&&j()},()=>{T|=1<<M}));return x=!0,j(),function(){ti(q),A(),x=!1}})}function Os(n){let r;return Po(n,o=>r=o)(),r}let Xr=!1,po=Symbol();function Yt(n,r,o){const u=o[r]??={store:null,source:Kt(void 0),unsubscribe:et};if(u.store!==n&&!(po in o))if(u.unsubscribe(),u.store=n??null,n==null)u.source.v=void 0,u.unsubscribe=et;else{var f=!0;u.unsubscribe=Po(n,c=>{f?u.source.v=c:Le(u.source,c)}),f=!1}return n&&po in o?Os(n):G(u.source)}function yi(){const n={};function r(){hi(()=>{for(var o in n)n[o].unsubscribe();ei(n,po,{enumerable:!1,value:!0})})}return[n,r]}function Nl(n){var r=Xr;try{return Xr=!1,[n(),Xr]}finally{Xr=r}}function se(n,r,o,u){var f=!zn||(o&Ku)!==0,c=(o&Mu)!==0,v=(o&Ru)!==0,y=u,x=!0,k=()=>(x&&(x=!1,y=v?De(u):u),y),T;if(c){var A=Dt in n||_u in n;T=Rn(n,r)?.set??(A&&r in n?Q=>n[r]=Q:void 0)}var j,q=!1;c?[j,q]=Nl(()=>n[r]):j=n[r],j===void 0&&u!==void 0&&(j=k(),T&&(f&&Cu(),T(j)));var D;if(f?D=()=>{var Q=n[r];return Q===void 0?k():(x=!0,Q)}:D=()=>{var Q=n[r];return Q!==void 0&&(y=void 0),Q===void 0?y:Q},f&&(o&qu)===0)return D;if(T){var M=n.$$legacy;return(function(Q,oe){return arguments.length>0?((!f||!oe||M||q)&&T(oe?D():Q),Q):D()})}var $=!1,z=((o&ju)!==0?hr:vr)(()=>($=!1,D()));c&&G(z);var ee=ce;return(function(Q,oe){if(arguments.length>0){const ue=oe?G(z):f&&c?Mn(Q):Q;return Le(z,ue),$=!0,y!==void 0&&(y=ue),Q}return wn&&$||(ee.f&bn)!==0?z.v:G(z)})}function Ps(n){Ce===null&&Va(),zn&&Ce.l!==null?Hl(Ce).m.push(n):uo(()=>{const r=De(n);if(typeof r=="function")return r})}function Vl(n){Ce===null&&Va(),Ps(()=>()=>De(n))}function Hl(n){var r=n.l;return r.u??={a:[],b:[],m:[]}}const $l="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add($l);zu();function As(n=new Date){return n.toISOString().slice(0,10)}const To=[{key:"morning",label:"Morning",range:[5,11]},{key:"afternoon",label:"Afternoon",range:[12,17]},{key:"evening",label:"Evening",range:[18,22]},{key:"night",label:"Night",range:[23,4]}];Object.fromEntries(To.map(n=>[n.key,n]));function Ul(n){const r=new Date(n).getHours();for(const o of To){const[u,f]=o.range;if(u<=f?r>=u&&r<=f:r>=u||r<=f)return o.key}return"night"}const zl=Array.from({length:24},(n,r)=>r),Yl=[0,10,20,30,40,50];function Wl(){const n=new Date;let r=Math.ceil(n.getMinutes()/10)*10,o=n.getHours();return r===60&&(r=0,o=(o+1)%24),{hours:o,minutes:r}}function Gl(n=new Date){const r=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],o=n.getDate(),u=r[n.getMonth()];return`${o} ${u}`}var Zl=xe('<div><div class="active-segment svelte-1aopooq"></div> <div class="bg-segment svelte-1aopooq"></div></div>');function Xl(n,r){let o=se(r,"variant",8),u=se(r,"level",8);var f=Zl(),c=te(f);let v;je(y=>{_r(f,1,`battery-segment ${o()??""}`,"svelte-1aopooq"),v=fo(c,"",v,y)},[()=>({width:u()+"%"})]),he(n,f)}var Ql=xe('<section class="battery-block svelte-npit7q"><div class="heading-small battery-score svelte-npit7q"> </div> <div class="battery-segments svelte-npit7q"></div></section>');function Jl(n,r){lt(r,!1);let o=se(r,"score",8),u=5;function f(A){return A===0?"red":A===1||A===2?"yellow":"green"}function c(A,j){const q=j-A;return q>=1?100:q<=0?0:q*100}let v=Kt();yn(()=>St(o()),()=>{const A=[];for(let j=0;j<u;j++){const q=f(j),D=c(j,o());A.push({variant:q,level:D})}Le(v,A)}),Yn();var y=Ql(),x=te(y),k=te(x),T=_e(x,2);gn(T,5,()=>G(v),mn,(A,j)=>{Xl(A,{get variant(){return G(j),De(()=>G(j).variant)},get level(){return G(j),De(()=>G(j).level)}})}),je(()=>ut(k,o())),he(n,y),ct()}const ec=n=>n;function tc(n){const r=n-1;return r*r*r+1}function nc(n,{delay:r=0,duration:o=400,easing:u=ec}={}){const f=+getComputedStyle(n).opacity;return{delay:r,duration:o,easing:u,css:c=>`opacity: ${c*f}`}}function yo(n,{delay:r=0,duration:o=400,easing:u=tc,axis:f="y"}={}){const c=getComputedStyle(n),v=+c.opacity,y=f==="y"?"height":"width",x=parseFloat(c[y]),k=f==="y"?["top","bottom"]:["left","right"],T=k.map(z=>`${z[0].toUpperCase()}${z.slice(1)}`),A=parseFloat(c[`padding${T[0]}`]),j=parseFloat(c[`padding${T[1]}`]),q=parseFloat(c[`margin${T[0]}`]),D=parseFloat(c[`margin${T[1]}`]),M=parseFloat(c[`border${T[0]}Width`]),$=parseFloat(c[`border${T[1]}Width`]);return{delay:r,duration:o,easing:u,css:z=>`overflow: hidden;opacity: ${Math.min(z*20,1)*v};${y}: ${z*x}px;padding-${k[0]}: ${z*A}px;padding-${k[1]}: ${z*j}px;margin-${k[0]}: ${z*q}px;margin-${k[1]}: ${z*D}px;border-${k[0]}-width: ${z*M}px;border-${k[1]}-width: ${z*$}px;min-${y}: 0`}}function mi(n,r){let o=se(r,"name",8);const u={remove:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 21C6.45 21 5.97917 20.8042 5.5875 20.4125C5.19583 20.0208 5 19.55 5 19V6H4V4H9V3H15V4H20V6H19V19C19 19.55 18.8042 20.0208 18.4125 20.4125C18.0208 20.8042 17.55 21 17 21H7ZM17 6H7V19H17V6ZM9 17H11V8H9V17ZM13 17H15V8H13V17Z" fill="currentColor"/></svg>',check:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.54998 18L3.84998 12.3L5.27498 10.875L9.54998 15.15L18.725 5.97498L20.15 7.39998L9.54998 18Z" fill="currentColor"/></svg>',chevron_left:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 18L8 12L14 6L15.4 7.4L10.8 12L15.4 16.6L14 18Z" fill="currentColor"/></svg>',close:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6.4 19L5 17.6L10.6 12L5 6.4L6.4 5L12 10.6L17.6 5L19 6.4L13.4 12L19 17.6L17.6 19L12 13.4L6.4 19Z" fill="currentColor"/></svg>',metrics:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 20V14H8V20H5ZM11 20V9H14V20H11ZM17 20V4H20V20H17Z" fill="currentColor"/></svg>',plus:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11 13H5V11H11V5H13V11H19V13H13V19H11V13Z" fill="currentColor"/></svg>',clock:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.65 21.65C10.4 21.65 9.22917 21.4125 8.1375 20.9375C7.04583 20.4625 6.09583 19.8208 5.2875 19.0125C4.47917 18.2042 3.8375 17.2542 3.3625 16.1625C2.8875 15.0708 2.65 13.9 2.65 12.65C2.65 11.4 2.8875 10.2292 3.3625 9.1375C3.8375 8.04583 4.47917 7.09583 5.2875 6.2875C6.09583 5.47917 7.04583 4.8375 8.1375 4.3625C9.22917 3.8875 10.4 3.65 11.65 3.65C12.9 3.65 14.0708 3.8875 15.1625 4.3625C16.2542 4.8375 17.2042 5.47917 18.0125 6.2875C18.8208 7.09583 19.4625 8.04583 19.9375 9.1375C20.4125 10.2292 20.65 11.4 20.65 12.65C20.65 13.9 20.4125 15.0708 19.9375 16.1625C19.4625 17.2542 18.8208 18.2042 18.0125 19.0125C17.2042 19.8208 16.2542 20.4625 15.1625 20.9375C14.0708 21.4125 12.9 21.65 11.65 21.65ZM14.45 16.85L15.85 15.45L12.65 12.25V7.65H10.65V13.05L14.45 16.85ZM5.25 2L6.65 3.4L2.4 7.65L1 6.25L5.25 2ZM18.05 2L22.3 6.25L20.9 7.65L16.65 3.4L18.05 2ZM11.65 19.65C13.6 19.65 15.2542 18.9708 16.6125 17.6125C17.9708 16.2542 18.65 14.6 18.65 12.65C18.65 10.7 17.9708 9.04583 16.6125 7.6875C15.2542 6.32917 13.6 5.65 11.65 5.65C9.7 5.65 8.04583 6.32917 6.6875 7.6875C5.32917 9.04583 4.65 10.7 4.65 12.65C4.65 14.6 5.32917 16.2542 6.6875 17.6125C8.04583 18.9708 9.7 19.65 11.65 19.65Z" fill="currentColor"/></svg>',battery:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 18C3.16667 18 2.45833 17.7083 1.875 17.125C1.29167 16.5417 1 15.8333 1 15V9C1 8.16667 1.29167 7.45833 1.875 6.875C2.45833 6.29167 3.16667 6 4 6H17.5C18.3333 6 19.0417 6.29167 19.625 6.875C20.2083 7.45833 20.5 8.16667 20.5 9V15C20.5 15.8333 20.2083 16.5417 19.625 17.125C19.0417 17.7083 18.3333 18 17.5 18H4ZM4 16H17.5C17.7833 16 18.0208 15.9042 18.2125 15.7125C18.4042 15.5208 18.5 15.2833 18.5 15V9C18.5 8.71667 18.4042 8.47917 18.2125 8.2875C18.0208 8.09583 17.7833 8 17.5 8H4C3.71667 8 3.47917 8.09583 3.2875 8.2875C3.09583 8.47917 3 8.71667 3 9V15C3 15.2833 3.09583 15.5208 3.2875 15.7125C3.47917 15.9042 3.71667 16 4 16ZM21.5 14.5V9.5H22C22.2833 9.5 22.5208 9.59583 22.7125 9.7875C22.9042 9.97917 23 10.2167 23 10.5V13.5C23 13.7833 22.9042 14.0208 22.7125 14.2125C22.5208 14.4042 22.2833 14.5 22 14.5H21.5ZM4 15V9H17.5V15H4Z" fill="currentColor"/></svg>'};var f=hn(),c=it(f);Al(c,()=>(St(o()),De(()=>u[o()]))),he(n,f)}var rc=xe("<div><!></div>");function Ln(n,r){let o=se(r,"name",8),u=se(r,"variant",8),f=se(r,"onClick",8,()=>{});var c=rc(),v=te(c);mi(v,{get name(){return o()}}),je(()=>_r(c,1,"button-icon "+u(),"svelte-271p8r")),pt("click",c,function(...y){f()?.apply(this,y)}),he(n,c)}var ic=xe('<div class="spacer svelte-1v8btbv"></div>'),oc=xe('<div class="sheet-header svelte-1v8btbv"><!> <span class="heading-small"> </span> <!> <!></div>'),ac=xe('<div class="backdrop svelte-1v8btbv"></div> <div class="sheet svelte-1v8btbv"><!> <div class="sheet-content svelte-1v8btbv"><!></div></div>',1);function sc(n,r){lt(r,!1);let o=se(r,"title",8),u=se(r,"isHeader",8,!0),f=se(r,"isOpen",8,!1),c=se(r,"isActionPossible",8,!0),v=se(r,"isAction",8,!0),y=se(r,"onAction",8,()=>{}),x=se(r,"onClose",8,()=>{});yn(()=>St(f()),()=>{document.body.style.overflow=f()?"hidden":""}),Yn();var k=hn(),T=it(k);{var A=j=>{var q=ac(),D=it(q),M=_e(D,2),$=te(M);{var z=oe=>{var ue=oc(),Z=te(ue);Ln(Z,{name:"close",get onClick(){return x()},variant:"secondary"});var Y=_e(Z,2),be=te(Y),Ee=_e(Y,2);{var Ke=X=>{Ln(X,{name:"check",get onClick(){return y()},variant:"primary"})},Be=X=>{var ye=hn(),ve=it(ye);{var Oe=ge=>{Ln(ge,{name:"check",variant:"secondary"})};ot(ve,ge=>{!c()&&v()&&ge(Oe)},!0)}he(X,ye)};ot(Ee,X=>{c()&&v()?X(Ke):X(Be,!1)})}var ie=_e(Ee,2);{var me=X=>{var ye=ic();he(X,ye)};ot(ie,X=>{v()||X(me)})}je(()=>ut(be,o())),he(oe,ue)};ot($,oe=>{u()&&oe(z)})}var ee=_e($,2),Q=te(ee);xs(Q,r,"default",{}),pt("click",D,function(...oe){x()?.apply(this,oe)}),oi(3,D,()=>nc),oi(3,M,()=>yo),he(j,q)};ot(T,j=>{f()&&j(A)})}he(n,k),ct()}var uc=xe('<div class="heading-container heading-small title svelte-1s7zazm"> </div>'),lc=xe('<div class="card svelte-1s7zazm"><!> <!></div>');function Qr(n,r){let o=se(r,"title",8,void 0);var u=lc(),f=te(u);{var c=y=>{var x=uc(),k=te(x);je(()=>ut(k,o())),he(y,x)};ot(f,y=>{o()&&y(c)})}var v=_e(f,2);xs(v,r,"default",{}),he(n,u)}var cc=xe('<div class="text-input svelte-1e5va0l"><div class="underlined-container svelte-1e5va0l"><textarea rows="1" class="svelte-1e5va0l"></textarea></div></div>');function fc(n,r){lt(r,!1);let o=se(r,"name",8),u=se(r,"isAutofocus",8,!1),f=se(r,"onInput",8),c=Kt(null);function v(T){const A=T.currentTarget;A.style.height="56px",A.style.height=`${A.scrollHeight}px`,f()(A.value)}yn(()=>G(c),()=>{G(c)&&(ma(c,G(c).style.height="56px"),ma(c,G(c).style.height=`${G(c).scrollHeight}px`))}),Yn(),xn();var y=cc(),x=te(y),k=te(x);cl(k,u()),Cs(k,T=>Le(c,T),()=>G(c)),je(()=>{Aa(k,"placeholder",o()),Aa(k,"name",o())}),pt("input",k,v),he(n,y),ct()}function Ka(n){return Object.prototype.toString.call(n)==="[object Date]"}function dc(n){return n}function hc(n){const r=n-1;return r*r*r+1}function qa(n){return n<.5?8*Math.pow(n,4):-8*Math.pow(n-1,4)+1}function mo(n,r){if(n===r||n!==n)return()=>n;const o=typeof n;if(o!==typeof r||Array.isArray(n)!==Array.isArray(r))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const u=r.map((f,c)=>mo(n[c],f));return f=>u.map(c=>c(f))}if(o==="object"){if(!n||!r)throw new Error("Object cannot be null");if(Ka(n)&&Ka(r)){const c=n.getTime(),y=r.getTime()-c;return x=>new Date(c+x*y)}const u=Object.keys(r),f={};return u.forEach(c=>{f[c]=mo(n[c],r[c])}),c=>{const v={};return u.forEach(y=>{v[y]=f[y](c)}),v}}if(o==="number"){const u=r-n;return f=>n+f*u}return()=>r}function vc(n,r={}){const o=pi(n);let u,f=n;function c(v,y){if(f=v,n==null)return o.set(n=v),Promise.resolve();let x=u,k=!1,{delay:T=0,duration:A=400,easing:j=dc,interpolate:q=mo}={...r,...y};if(A===0)return x&&(x.abort(),x=null),o.set(n=f),Promise.resolve();const D=Et.now()+T;let M;return u=Ss($=>{if($<D)return!0;k||(M=q(n,v),typeof A=="function"&&(A=A(n,v)),k=!0),x&&(x.abort(),x=null);const z=$-D;return z>A?(o.set(n=v),!1):(o.set(n=M(j(z/A))),!0)}),u.promise}return{set:c,update:(v,y)=>c(v(f,n),y),subscribe:o.subscribe}}var pc=xe('<div class="tick svelte-yhjxqj"></div>'),yc=xe('<div class="slider svelte-yhjxqj"><div class="icon-container svelte-yhjxqj"><!></div> <div class="slider-container svelte-yhjxqj"><div class="slider-scale svelte-yhjxqj"><!> <div class="thumb svelte-yhjxqj"><div class="handler svelte-yhjxqj"></div></div></div></div> <div class="score-container svelte-yhjxqj"> </div></div>');function mc(n,r){lt(r,!1);const o=()=>Yt(q,"$percent",u),[u,f]=yi();let c=se(r,"min",24,()=>-5),v=se(r,"max",8,5),y=se(r,"step",8,1),x=se(r,"value",8,0),k=se(r,"onChange",8,()=>{}),T=Kt(),A=!1,j=x();const q=vc((x()-c())/(v()-c())*100,{duration:30,easing:hc});function D(X){const ve=100/((v()-c())/y()),Oe=Math.round(X/ve)*ve,ge=c()+Oe/100*(v()-c());return{snappedPercent:Oe,snappedValue:ge}}function M(X){const ye=G(T).getBoundingClientRect();let ve=(X-ye.left)/ye.width*100;ve=Math.max(0,Math.min(100,ve));const{snappedPercent:Oe,snappedValue:ge}=D(ve);q.set(Oe),ge!==j&&(j=ge,k()(Math.round(ge/y())*y()))}function $(X){A=!0,M("touches"in X?X.touches[0].clientX:X.clientX)}function z(X){A&&M("touches"in X?X.touches[0].clientX:X.clientX)}function ee(){if(!A)return;A=!1;const{snappedPercent:X}=D(o());q.set(X)}Ps(()=>{window.addEventListener("mousemove",z),window.addEventListener("touchmove",z),window.addEventListener("mouseup",ee),window.addEventListener("touchend",ee)}),Vl(()=>{window.removeEventListener("mousemove",z),window.removeEventListener("touchmove",z),window.removeEventListener("mouseup",ee),window.removeEventListener("touchend",ee)});const Q=[],oe=(v()-c())/y()+1;for(let X=0;X<oe;X++){const ye=X*y()+c();Q.push(ye)}xn();var ue=yc(),Z=te(ue),Y=te(Z);mi(Y,{name:"battery"});var be=_e(Z,2),Ee=te(be),Ke=te(Ee);gn(Ke,1,()=>Q,mn,(X,ye,ve)=>{var Oe=pc();je(()=>fo(Oe,`left: ${De(()=>ve/(Q.length-1)*100)??""}%`)),he(X,Oe)});var Be=_e(Ke,2);Cs(Ee,X=>Le(T,X),()=>G(T));var ie=_e(be,2),me=te(ie);je(()=>{fo(Be,`left: ${o()??""}%`),ut(me,x())}),pt("mousedown",Ee,$),pt("touchstart",Ee,$),he(n,ue),ct(),f()}var gc=xe('<div><div class="trigger svelte-184lr04"></div></div>');function _c(n,r){lt(r,!1);const o=Kt();let u=se(r,"isActive",8),f=se(r,"onToggle",8);function c(y){return y?"switch active":"switch"}yn(()=>St(u()),()=>{Le(o,c(u()))}),Yn();var v=gc();je(()=>_r(v,1,Dl(G(o)),"svelte-184lr04")),pt("click",v,function(...y){f()?.apply(this,y)}),he(n,v),ct()}var bc=xe('<div class="time-label body-small-extra svelte-g8oebw"> </div>'),wc=xe("<option> </option>"),xc=xe("<option> </option>"),Ec=xe('<div class="option-settings-container svelte-g8oebw"><select name="hours" class="svelte-g8oebw"></select> <select name="minutes" class="svelte-g8oebw"></select></div>'),kc=xe('<div class="time-selector svelte-g8oebw"><div class="option-container svelte-g8oebw"><div class="icon-container svelte-g8oebw"><!></div> <div><div class="title-container svelte-g8oebw"><div class="title">Time</div> <!></div> <!></div></div> <!></div>');function Sc(n,r){lt(r,!1);const o=Kt(),u=Kt();let f=se(r,"isEnabled",8),c=se(r,"isExpanded",8),v=se(r,"hours",8),y=se(r,"minutes",8),x=se(r,"hoursList",8),k=se(r,"minutesList",8),T=se(r,"onIsEnabledToggle",8),A=se(r,"onIsExpandedToggle",8),j=se(r,"onHoursChange",8),q=se(r,"onMinutesChange",8);function D(ie){const me=Number(ie.currentTarget.value);j()(me)}function M(ie){const me=Number(ie.currentTarget.value);q()(me)}yn(()=>St(v()),()=>{Le(o,String(v()??""))}),yn(()=>St(y()),()=>{Le(u,String(y()??""))}),Yn(),xn();var $=kc(),z=te($),ee=te(z),Q=te(ee);mi(Q,{name:"clock"});var oe=_e(ee,2);let ue;var Z=te(oe),Y=_e(te(Z),2);{var be=ie=>{var me=bc(),X=te(me);je((ye,ve)=>ut(X,`${ye??""}:${ve??""}`),[()=>(St(v()),De(()=>v().toString().padStart(2,"0"))),()=>(St(y()),De(()=>y().toString().padStart(2,"0")))]),oi(3,me,()=>yo,()=>({duration:250,easing:qa})),he(ie,me)};ot(Y,ie=>{f()&&ie(be)})}var Ee=_e(Z,2);_c(Ee,{get isActive(){return f()},get onToggle(){return T()}});var Ke=_e(z,2);{var Be=ie=>{var me=Ec(),X=te(me);gn(X,5,x,mn,(ge,Ie)=>{var Pe=wc(),Pt=te(Pe),Rt={};je((Ze,mt)=>{ut(Pt,Ze),Rt!==(Rt=mt)&&(Pe.value=(Pe.__value=mt)??"")},[()=>(G(Ie),De(()=>G(Ie).toString().padStart(2,"0"))),()=>(G(Ie),De(()=>String(G(Ie))))]),he(ge,Pe)});var ye;Oa(X);var ve=_e(X,2);gn(ve,5,k,mn,(ge,Ie)=>{var Pe=xc(),Pt=te(Pe),Rt={};je((Ze,mt)=>{ut(Pt,Ze),Rt!==(Rt=mt)&&(Pe.value=(Pe.__value=mt)??"")},[()=>(G(Ie),De(()=>G(Ie).toString().padStart(2,"0"))),()=>(G(Ie),De(()=>String(G(Ie))))]),he(ge,Pe)});var Oe;Oa(ve),je(()=>{ye!==(ye=G(o))&&(X.value=(X.__value=G(o))??"",ho(X,G(o))),Oe!==(Oe=G(u))&&(ve.value=(ve.__value=G(u))??"",ho(ve,G(u)))}),pt("change",X,D),pt("change",ve,M),oi(3,me,()=>yo,()=>({duration:250,easing:qa})),he(ie,me)};ot(Ke,ie=>{f()&&c()&&ie(Be)})}je(ie=>ue=_r(oe,1,"underlined-container svelte-g8oebw",null,ue,ie),[()=>({"has-underline":f()&&c()})]),pt("click",ee,function(...ie){A()?.apply(this,ie)}),pt("click",Z,function(...ie){A()?.apply(this,ie)}),he(n,$),ct()}const Ts={isFormOpen:!1,title:"",score:0,customTime:{isEnabled:!1,isExpanded:!1,hours:null,minutes:null}},ft=pi({...Ts});function Cc(){ft.set({...Ts})}function Oc(){ft.update(n=>{if(n.customTime.isEnabled)return{...n,customTime:{...n.customTime,isEnabled:!1,isExpanded:!1}};{const{hours:o,minutes:u}=Wl();return{...n,customTime:{...n.customTime,isEnabled:!0,isExpanded:!0,hours:o,minutes:u}}}})}function Pc(){ft.update(n=>({...n,customTime:{...n.customTime,isExpanded:!n.customTime.isExpanded}}))}function Ac(n){ft.update(r=>({...r,customTime:{...r.customTime,hours:n}}))}function Tc(n){ft.update(r=>({...r,customTime:{...r.customTime,minutes:n}}))}function Dc(n){ft.update(r=>({...r,title:n}))}function Ic(n){ft.update(r=>({...r,score:n}))}function jc(){ft.update(n=>({...n,isFormOpen:!0}))}function Kc(){ft.update(n=>({...n,isFormOpen:!1}))}var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jr={exports:{}},Rc=Jr.exports,Ma;function Bc(){return Ma||(Ma=1,(function(n,r){(function(o,u){n.exports=u()})(Rc,function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])})(e,t)},u=function(){return(u=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function f(e,t,i){for(var a,s=0,l=t.length;s<l;s++)!a&&s in t||((a=a||Array.prototype.slice.call(t,0,s))[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:qc,v=Object.keys,y=Array.isArray;function x(e,t){return typeof t!="object"||v(t).forEach(function(i){e[i]=t[i]}),e}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var k=Object.getPrototypeOf,T={}.hasOwnProperty;function A(e,t){return T.call(e,t)}function j(e,t){typeof t=="function"&&(t=t(k(e))),(typeof Reflect>"u"?v:Reflect.ownKeys)(t).forEach(function(i){D(e,i,t[i])})}var q=Object.defineProperty;function D(e,t,i,a){q(e,t,x(i&&A(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},a))}function M(e){return{from:function(t){return e.prototype=Object.create(t.prototype),D(e.prototype,"constructor",e),{extend:j.bind(null,e.prototype)}}}}var $=Object.getOwnPropertyDescriptor,z=[].slice;function ee(e,t,i){return z.call(e,t,i)}function Q(e,t){return t(e)}function oe(e){if(!e)throw new Error("Assertion Failed")}function ue(e){c.setImmediate?setImmediate(e):setTimeout(e,0)}function Z(e,t){if(typeof t=="string"&&A(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var i=[],a=0,s=t.length;a<s;++a){var l=Z(e,t[a]);i.push(l)}return i}var d=t.indexOf(".");if(d!==-1){var h=e[t.substr(0,d)];return h==null?void 0:Z(h,t.substr(d+1))}}function Y(e,t,i){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){oe(typeof i!="string"&&"length"in i);for(var a=0,s=t.length;a<s;++a)Y(e,t[a],i[a])}else{var l,d,h=t.indexOf(".");h!==-1?(l=t.substr(0,h),(d=t.substr(h+1))===""?i===void 0?y(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=i:Y(h=!(h=e[l])||!A(e,l)?e[l]={}:h,d,i)):i===void 0?y(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=i}}function be(e){var t,i={};for(t in e)A(e,t)&&(i[t]=e[t]);return i}var Ee=[].concat;function Ke(e){return Ee.apply([],e)}var Jt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ke([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return c[e]}),Be=new Set(Jt.map(function(e){return c[e]})),ie=null;function me(e){return ie=new WeakMap,e=(function t(i){if(!i||typeof i!="object")return i;var a=ie.get(i);if(a)return a;if(y(i)){a=[],ie.set(i,a);for(var s=0,l=i.length;s<l;++s)a.push(t(i[s]))}else if(Be.has(i.constructor))a=i;else{var d,h=k(i);for(d in a=h===Object.prototype?{}:Object.create(h),ie.set(i,a),i)A(i,d)&&(a[d]=t(i[d]))}return a})(e),ie=null,e}var X={}.toString;function ye(e){return X.call(e).slice(8,-1)}var ve=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Oe=typeof ve=="symbol"?function(e){var t;return e!=null&&(t=e[ve])&&t.apply(e)}:function(){return null};function ge(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Ie={};function Pe(e){var t,i,a,s;if(arguments.length===1){if(y(e))return e.slice();if(this===Ie&&typeof e=="string")return[e];if(s=Oe(e)){for(i=[];!(a=s.next()).done;)i.push(a.value);return i}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(i=new Array(t);t--;)i[t]=e[t];return i}for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}var Pt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zn),Rt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ze(e,t){this.name=e,this.message=t}function mt(e,t){return e+". Errors: "+Object.keys(t).map(function(i){return t[i].toString()}).filter(function(i,a,s){return s.indexOf(i)===a}).join(`
`)}function En(e,t,i,a){this.failures=t,this.failedKeys=a,this.successCount=i,this.message=mt(e,t)}function gt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(i){return t[i]}),this.failuresByPos=t,this.message=mt(e,this.failures)}M(Ze).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(En).from(Ze),M(gt).from(Ze);var _i=nt.reduce(function(e,t){return e[t]=t+"Error",e},{}),qs=Ze,J=nt.reduce(function(e,t){var i=t+"Error";function a(s,l){this.name=i,s?typeof s=="string"?(this.message="".concat(s).concat(l?`
 `+l:""),this.inner=l||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=Rt[t]||i,this.inner=null)}return M(a).from(qs),e[t]=a,e},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var Io=Zn.reduce(function(e,t){return e[t+"Error"]=J[t],e},{}),xr=nt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=J[t]),e},{});function we(){}function Wn(e){return e}function Ms(e,t){return e==null||e===Wn?t:function(i){return t(e(i))}}function Qt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Rs(e,t){return e===we?t:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var a=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Qt(a,this.onsuccess):a),s&&(this.onerror=this.onerror?Qt(s,this.onerror):s),l!==void 0?l:i}}function Bs(e,t){return e===we?t:function(){e.apply(this,arguments);var i=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Qt(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Qt(a,this.onerror):a)}}function Fs(e,t){return e===we?t:function(i){var a=e.apply(this,arguments);x(i,a);var s=this.onsuccess,l=this.onerror;return this.onsuccess=null,this.onerror=null,i=t.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?Qt(s,this.onsuccess):s),l&&(this.onerror=this.onerror?Qt(l,this.onerror):l),a===void 0?i===void 0?void 0:i:x(a,i)}}function Ls(e,t){return e===we?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function bi(e,t){return e===we?t:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var a=this,s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return i.then(function(){return t.apply(a,l)})}return t.apply(this,arguments)}}xr.ModifyError=En,xr.DexieError=Ze,xr.BulkError=gt;var _t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function jo(e){_t=e}var Gn={},Ko=100,Jt=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,k(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,k(t),e]})(),Zn=Jt[0],nt=Jt[1],Jt=Jt[2],nt=nt&&nt.then,en=Zn&&Zn.constructor,wi=!!Jt,Xn=function(e,t){Qn.push([e,t]),Er&&(queueMicrotask(Vs),Er=!1)},xi=!0,Er=!0,tn=[],kr=[],Ei=Wn,Bt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:we,pgp:!1,env:{},finalize:we},W=Bt,Qn=[],nn=0,Sr=[];function H(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=W;if(typeof e!="function"){if(e!==Gn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Si(this,this._value))}this._state=null,this._value=null,++t.ref,(function i(a,s){try{s(function(l){if(a._state===null){if(l===a)throw new TypeError("A promise cannot be resolved with itself.");var d=a._lib&&kn();l&&typeof l.then=="function"?i(a,function(h,m){l instanceof H?l._then(h,m):l.then(h,m)}):(a._state=!0,a._value=l,Mo(a)),d&&Sn()}},Si.bind(null,a))}catch(l){Si(a,l)}})(this,e)}var ki={get:function(){var e=W,t=Ar;function i(a,s){var l=this,d=!e.global&&(e!==W||t!==Ar),h=d&&!Lt(),m=new H(function(g,E){Ci(l,new qo(Bo(a,e,d,h),Bo(s,e,d,h),g,E,e))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return i.prototype=Gn,i},set:function(e){D(this,"then",e&&e.prototype===Gn?ki:{get:function(){return e},set:ki.set})}};function qo(e,t,i,a,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=i,this.reject=a,this.psd=s}function Si(e,t){var i,a;kr.push(t),e._state===null&&(i=e._lib&&kn(),t=Ei(t),e._state=!1,e._value=t,a=e,tn.some(function(s){return s._value===a._value})||tn.push(a),Mo(e),i&&Sn())}function Mo(e){var t=e._listeners;e._listeners=[];for(var i=0,a=t.length;i<a;++i)Ci(e,t[i]);var s=e._PSD;--s.ref||s.finalize(),nn===0&&(++nn,Xn(function(){--nn==0&&Oi()},[]))}function Ci(e,t){if(e._state!==null){var i=e._state?t.onFulfilled:t.onRejected;if(i===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++nn,Xn(Ns,[i,e,t])}else e._listeners.push(t)}function Ns(e,t,i){try{var a,s=t._value;!t._state&&kr.length&&(kr=[]),a=_t&&t._consoleTask?t._consoleTask.run(function(){return e(s)}):e(s),t._state||kr.indexOf(s)!==-1||(function(l){for(var d=tn.length;d;)if(tn[--d]._value===l._value)return tn.splice(d,1)})(t),i.resolve(a)}catch(l){i.reject(l)}finally{--nn==0&&Oi(),--i.psd.ref||i.psd.finalize()}}function Vs(){rn(Bt,function(){kn()&&Sn()})}function kn(){var e=xi;return Er=xi=!1,e}function Sn(){var e,t,i;do for(;0<Qn.length;)for(e=Qn,Qn=[],i=e.length,t=0;t<i;++t){var a=e[t];a[0].apply(null,a[1])}while(0<Qn.length);Er=xi=!0}function Oi(){var e=tn;tn=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=Sr.slice(0),i=t.length;i;)t[--i]()}function Cr(e){return new H(Gn,!1,e)}function Se(e,t){var i=W;return function(){var a=kn(),s=W;try{return Nt(i,!0),e.apply(this,arguments)}catch(l){t&&t(l)}finally{Nt(s,!1),a&&Sn()}}}j(H.prototype,{then:ki,_then:function(e,t){Ci(this,new qo(null,null,e,t,W))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,i=arguments[1];return typeof t=="function"?this.then(null,function(a){return(a instanceof t?i:Cr)(a)}):this.then(null,function(a){return(a&&a.name===t?i:Cr)(a)})},finally:function(e){return this.then(function(t){return H.resolve(e()).then(function(){return t})},function(t){return H.resolve(e()).then(function(){return Cr(t)})})},timeout:function(e,t){var i=this;return e<1/0?new H(function(a,s){var l=setTimeout(function(){return s(new J.Timeout(t))},e);i.then(a,s).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&D(H.prototype,Symbol.toStringTag,"Dexie.Promise"),Bt.env=Ro(),j(H,{all:function(){var e=Pe.apply(null,arguments).map(Tr);return new H(function(t,i){e.length===0&&t([]);var a=e.length;e.forEach(function(s,l){return H.resolve(s).then(function(d){e[l]=d,--a||t(e)},i)})})},resolve:function(e){return e instanceof H?e:e&&typeof e.then=="function"?new H(function(t,i){e.then(t,i)}):new H(Gn,!0,e)},reject:Cr,race:function(){var e=Pe.apply(null,arguments).map(Tr);return new H(function(t,i){e.map(function(a){return H.resolve(a).then(t,i)})})},PSD:{get:function(){return W},set:function(e){return W=e}},totalEchoes:{get:function(){return Ar}},newPSD:Ft,usePSD:rn,scheduler:{get:function(){return Xn},set:function(e){Xn=e}},rejectionMapper:{get:function(){return Ei},set:function(e){Ei=e}},follow:function(e,t){return new H(function(i,a){return Ft(function(s,l){var d=W;d.unhandleds=[],d.onunhandled=l,d.finalize=Qt(function(){var h,m=this;h=function(){m.unhandleds.length===0?s():l(m.unhandleds[0])},Sr.push(function g(){h(),Sr.splice(Sr.indexOf(g),1)}),++nn,Xn(function(){--nn==0&&Oi()},[])},d.finalize),e()},t,i,a)})}}),en&&(en.allSettled&&D(H,"allSettled",function(){var e=Pe.apply(null,arguments).map(Tr);return new H(function(t){e.length===0&&t([]);var i=e.length,a=new Array(i);e.forEach(function(s,l){return H.resolve(s).then(function(d){return a[l]={status:"fulfilled",value:d}},function(d){return a[l]={status:"rejected",reason:d}}).then(function(){return--i||t(a)})})})}),en.any&&typeof AggregateError<"u"&&D(H,"any",function(){var e=Pe.apply(null,arguments).map(Tr);return new H(function(t,i){e.length===0&&i(new AggregateError([]));var a=e.length,s=new Array(a);e.forEach(function(l,d){return H.resolve(l).then(function(h){return t(h)},function(h){s[d]=h,--a||i(new AggregateError(s))})})})}),en.withResolvers&&(H.withResolvers=en.withResolvers));var qe={awaits:0,echoes:0,id:0},Hs=0,Or=[],Pr=0,Ar=0,$s=0;function Ft(e,t,i,a){var s=W,l=Object.create(s);return l.parent=s,l.ref=0,l.global=!1,l.id=++$s,Bt.env,l.env=wi?{Promise:H,PromiseProp:{value:H,configurable:!0,writable:!0},all:H.all,race:H.race,allSettled:H.allSettled,any:H.any,resolve:H.resolve,reject:H.reject}:{},t&&x(l,t),++s.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()},a=rn(l,e,i,a),l.ref===0&&l.finalize(),a}function Cn(){return qe.id||(qe.id=++Hs),++qe.awaits,qe.echoes+=Ko,qe.id}function Lt(){return!!qe.awaits&&(--qe.awaits==0&&(qe.id=0),qe.echoes=qe.awaits*Ko,!0)}function Tr(e){return qe.echoes&&e&&e.constructor===en?(Cn(),e.then(function(t){return Lt(),t},function(t){return Lt(),Ae(t)})):e}function Us(){var e=Or[Or.length-1];Or.pop(),Nt(e,!1)}function Nt(e,t){var i,a=W;(t?!qe.echoes||Pr++&&e===W:!Pr||--Pr&&e===W)||queueMicrotask(t?(function(s){++Ar,qe.echoes&&--qe.echoes!=0||(qe.echoes=qe.awaits=qe.id=0),Or.push(W),Nt(s,!0)}).bind(null,e):Us),e!==W&&(W=e,a===Bt&&(Bt.env=Ro()),wi&&(i=Bt.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(c,"Promise",t.PromiseProp),i.all=t.all,i.race=t.race,i.resolve=t.resolve,i.reject=t.reject,t.allSettled&&(i.allSettled=t.allSettled),t.any&&(i.any=t.any))))}function Ro(){var e=c.Promise;return wi?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function rn(e,t,i,a,s){var l=W;try{return Nt(e,!0),t(i,a,s)}finally{Nt(l,!1)}}function Bo(e,t,i,a){return typeof e!="function"?e:function(){var s=W;i&&Cn(),Nt(t,!0);try{return e.apply(this,arguments)}finally{Nt(s,!1),a&&queueMicrotask(Lt)}}}function Pi(e){Promise===en&&qe.echoes===0?Pr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+nt).indexOf("[native code]")===-1&&(Cn=Lt=we);var Ae=H.reject,on="￿",At="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fo="String expected.",On=[],Dr="__dbnames",Ai="readonly",Ti="readwrite";function an(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Lo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ir(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=me(t))[e],t}}function No(){throw J.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function de(e,t){try{var i=Vo(e),a=Vo(t);if(i!==a)return i==="Array"?1:a==="Array"?-1:i==="binary"?1:a==="binary"?-1:i==="string"?1:a==="string"?-1:i==="Date"?1:a!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return(function(s,l){for(var d=s.length,h=l.length,m=d<h?d:h,g=0;g<m;++g)if(s[g]!==l[g])return s[g]<l[g]?-1:1;return d===h?0:d<h?-1:1})(Ho(e),Ho(t));case"Array":return(function(s,l){for(var d=s.length,h=l.length,m=d<h?d:h,g=0;g<m;++g){var E=de(s[g],l[g]);if(E!==0)return E}return d===h?0:d<h?-1:1})(e,t)}}catch{}return NaN}function Vo(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=ye(e),e==="ArrayBuffer"?"binary":e)}function Ho(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function jr(e,t,i){var a=e.schema.yProps;return a?(t&&0<i.numFailures&&(t=t.filter(function(s,l){return!i.failures[l]})),Promise.all(a.map(function(s){return s=s.updatesTable,t?e.db.table(s).where("k").anyOf(t).delete():e.db.table(s).clear()})).then(function(){return i})):i}var Jn=($o.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var i=t.add;if(y(i))return f(f([],y(e)?e:[],!0),i).sort();if(typeof i=="number")return(Number(e)||0)+i;if(typeof i=="bigint")try{return BigInt(e)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(t.remove!==void 0){var a=t.remove;if(y(a))return y(e)?e.filter(function(s){return!a.includes(s)}).sort():[];if(typeof a=="number")return Number(e)-a;if(typeof a=="bigint")try{return BigInt(e)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return i=(i=t.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof e=="string"&&e.startsWith(i)?t.replacePrefix[1]+e.substring(i.length):e},$o);function $o(e){this["@@propmod"]=e}function Uo(e,t){for(var i=v(t),a=i.length,s=!1,l=0;l<a;++l){var d=i[l],h=t[d],m=Z(e,d);h instanceof Jn?(Y(e,d,h.execute(m)),s=!0):m!==h&&(Y(e,d,h),s=!0)}return s}var zo=(ke.prototype._trans=function(e,t,i){var a=this._tx||W.trans,s=this.name,l=_t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function d(g,E,p){if(!p.schema[s])throw new J.NotFound("Table "+s+" not part of transaction");return t(p.idbtrans,p)}var h=kn();try{var m=a&&a.db._novip===this.db._novip?a===W.trans?a._promise(e,d,i):Ft(function(){return a._promise(e,d,i)},{trans:a,transless:W.transless||W}):(function g(E,p,C,_){if(E.idbdb&&(E._state.openComplete||W.letThrough||E._vip)){var b=E._createTransaction(p,C,E._dbSchema);try{b.create(),E._state.PR1398_maxLoop=3}catch(w){return w.name===_i.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return g(E,p,C,_)})):Ae(w)}return b._promise(p,function(w,S){return Ft(function(){return W.trans=b,_(w,S,b)})}).then(function(w){if(p==="readwrite")try{b.idbtrans.commit()}catch{}return p==="readonly"?w:b._completion.then(function(){return w})})}if(E._state.openComplete)return Ae(new J.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return Ae(new J.DatabaseClosed);E.open().catch(we)}return E._state.dbReadyPromise.then(function(){return g(E,p,C,_)})})(this.db,e,[this.name],d);return l&&(m._consoleTask=l,m=m.catch(function(g){return console.trace(g),Ae(g)})),m}finally{h&&Sn()}},ke.prototype.get=function(e,t){var i=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Ae(new J.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return i.core.get({trans:a,key:e}).then(function(s){return i.hook.reading.fire(s)})}).then(t)},ke.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(y(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=v(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(h){if(h.compound&&t.every(function(g){return 0<=h.keyPath.indexOf(g)})){for(var m=0;m<t.length;++m)if(t.indexOf(h.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(h,m){return h.keyPath.length-m.keyPath.length})[0];if(i&&this.db._maxKey!==on){var l=i.keyPath.slice(0,t.length);return this.where(l).equals(l.map(function(m){return e[m]}))}!i&&_t&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function s(h,m){return de(h,m)===0}var d=t.reduce(function(p,m){var g=p[0],E=p[1],p=a[m],C=e[m];return[g||p,g||!p?an(E,p&&p.multi?function(_){return _=Z(_,m),y(_)&&_.some(function(b){return s(C,b)})}:function(_){return s(C,Z(_,m))}):E]},[null,null]),l=d[0],d=d[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(d):i?this.filter(d):this.where(t).equals("")},ke.prototype.filter=function(e){return this.toCollection().and(e)},ke.prototype.count=function(e){return this.toCollection().count(e)},ke.prototype.offset=function(e){return this.toCollection().offset(e)},ke.prototype.limit=function(e){return this.toCollection().limit(e)},ke.prototype.each=function(e){return this.toCollection().each(e)},ke.prototype.toArray=function(e){return this.toCollection().toArray(e)},ke.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ke.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,y(e)?"[".concat(e.join("+"),"]"):e))},ke.prototype.reverse=function(){return this.toCollection().reverse()},ke.prototype.mapToClass=function(e){var t,i=this.db,a=this.name;function s(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof No&&((function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function E(){this.constructor=m}o(m,g),m.prototype=g===null?Object.create(g):(E.prototype=g.prototype,new E)})(s,t=e),Object.defineProperty(s.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),s.prototype.table=function(){return a},e=s);for(var l=new Set,d=e.prototype;d;d=k(d))Object.getOwnPropertyNames(d).forEach(function(m){return l.add(m)});function h(m){if(!m)return m;var g,E=Object.create(e.prototype);for(g in m)if(!l.has(g))try{E[g]=m[g]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),e},ke.prototype.defineClass=function(){return this.mapToClass(function(e){x(this,e)})},ke.prototype.add=function(e,t){var i=this,a=this.schema.primKey,s=a.auto,l=a.keyPath,d=e;return l&&s&&(d=Ir(l)(e)),this._trans("readwrite",function(h){return i.core.mutate({trans:h,type:"add",keys:t!=null?[t]:null,values:[d]})}).then(function(h){return h.numFailures?H.reject(h.failures[0]):h.lastResult}).then(function(h){if(l)try{Y(e,l,h)}catch{}return h})},ke.prototype.upsert=function(e,t){var i=this,a=this.schema.primKey.keyPath;return this._trans("readwrite",function(s){return i.core.get({trans:s,key:e}).then(function(l){var d=l??{};return Uo(d,t),a&&Y(d,a,e),i.core.mutate({trans:s,type:"put",values:[d],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(h){return h.numFailures?H.reject(h.failures[0]):!!l})})})},ke.prototype.update=function(e,t){return typeof e!="object"||y(e)?this.where(":id").equals(e).modify(t):(e=Z(e,this.schema.primKey.keyPath),e===void 0?Ae(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},ke.prototype.put=function(e,t){var i=this,a=this.schema.primKey,s=a.auto,l=a.keyPath,d=e;return l&&s&&(d=Ir(l)(e)),this._trans("readwrite",function(h){return i.core.mutate({trans:h,type:"put",values:[d],keys:t!=null?[t]:null})}).then(function(h){return h.numFailures?H.reject(h.failures[0]):h.lastResult}).then(function(h){if(l)try{Y(e,l,h)}catch{}return h})},ke.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:[e]}).then(function(a){return jr(t,[e],a)}).then(function(a){return a.numFailures?H.reject(a.failures[0]):void 0})})},ke.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Lo}).then(function(i){return jr(e,null,i)})}).then(function(t){return t.numFailures?H.reject(t.failures[0]):void 0})},ke.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(i){return t.core.getMany({keys:e,trans:i}).then(function(a){return a.map(function(s){return t.hook.reading.fire(s)})})})},ke.prototype.bulkAdd=function(e,t,i){var a=this,s=Array.isArray(t)?t:void 0,l=(i=i||(s?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",function(d){var g=a.schema.primKey,h=g.auto,g=g.keyPath;if(g&&s)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,g=g&&h?e.map(Ir(g)):e;return a.core.mutate({trans:d,type:"add",keys:s,values:g,wantResults:l}).then(function(b){var p=b.numFailures,C=b.results,_=b.lastResult,b=b.failures;if(p===0)return l?C:_;throw new gt("".concat(a.name,".bulkAdd(): ").concat(p," of ").concat(m," operations failed"),b)})})},ke.prototype.bulkPut=function(e,t,i){var a=this,s=Array.isArray(t)?t:void 0,l=(i=i||(s?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",function(d){var g=a.schema.primKey,h=g.auto,g=g.keyPath;if(g&&s)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,g=g&&h?e.map(Ir(g)):e;return a.core.mutate({trans:d,type:"put",keys:s,values:g,wantResults:l}).then(function(b){var p=b.numFailures,C=b.results,_=b.lastResult,b=b.failures;if(p===0)return l?C:_;throw new gt("".concat(a.name,".bulkPut(): ").concat(p," of ").concat(m," operations failed"),b)})})},ke.prototype.bulkUpdate=function(e){var t=this,i=this.core,a=e.map(function(d){return d.key}),s=e.map(function(d){return d.changes}),l=[];return this._trans("readwrite",function(d){return i.getMany({trans:d,keys:a,cache:"clone"}).then(function(h){var m=[],g=[];e.forEach(function(p,C){var _=p.key,b=p.changes,w=h[C];if(w){for(var S=0,O=Object.keys(b);S<O.length;S++){var P=O[S],I=b[P];if(P===t.schema.primKey.keyPath){if(de(I,_)!==0)throw new J.Constraint("Cannot update primary key in bulkUpdate()")}else Y(w,P,I)}l.push(C),m.push(_),g.push(w)}});var E=m.length;return i.mutate({trans:d,type:"put",keys:m,values:g,updates:{keys:a,changeSpecs:s}}).then(function(p){var C=p.numFailures,_=p.failures;if(C===0)return E;for(var b=0,w=Object.keys(_);b<w.length;b++){var S,O=w[b],P=l[Number(O)];P!=null&&(S=_[O],delete _[O],_[P]=S)}throw new gt("".concat(t.name,".bulkUpdate(): ").concat(C," of ").concat(E," operations failed"),_)})})})},ke.prototype.bulkDelete=function(e){var t=this,i=e.length;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"delete",keys:e}).then(function(s){return jr(t,e,s)})}).then(function(d){var s=d.numFailures,l=d.lastResult,d=d.failures;if(s===0)return l;throw new gt("".concat(t.name,".bulkDelete(): ").concat(s," of ").concat(i," operations failed"),d)})},ke);function ke(){}function er(e){function t(d,h){if(h){for(var m=arguments.length,g=new Array(m-1);--m;)g[m-1]=arguments[m];return i[d].subscribe.apply(null,g),e}if(typeof d=="string")return i[d]}var i={};t.addEventType=l;for(var a=1,s=arguments.length;a<s;++a)l(arguments[a]);return t;function l(d,h,m){if(typeof d!="object"){var g;h=h||Ls;var E={subscribers:[],fire:m=m||we,subscribe:function(p){E.subscribers.indexOf(p)===-1&&(E.subscribers.push(p),E.fire=h(E.fire,p))},unsubscribe:function(p){E.subscribers=E.subscribers.filter(function(C){return C!==p}),E.fire=E.subscribers.reduce(h,m)}};return i[d]=t[d]=E}v(g=d).forEach(function(p){var C=g[p];if(y(C))l(p,g[p][0],g[p][1]);else{if(C!=="asap")throw new J.InvalidArgument("Invalid event config");var _=l(p,Wn,function(){for(var b=arguments.length,w=new Array(b);b--;)w[b]=arguments[b];_.subscribers.forEach(function(S){ue(function(){S.apply(null,w)})})})}})}}function tr(e,t){return M(t).from({prototype:e}),t}function Pn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Di(e,t){e.filter=an(e.filter,t)}function Ii(e,t,i){var a=e.replayFilter;e.replayFilter=a?function(){return an(a(),t())}:t,e.justLimit=i&&!a}function Kr(e,t){if(e.isPrimKey)return t.primaryKey;var i=t.getIndexByKeyPath(e.index);if(!i)throw new J.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return i}function Yo(e,t,i){var a=Kr(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function qr(e,t,i,a){var s=e.replayFilter?an(e.filter,e.replayFilter()):e.filter;if(e.or){var l={},d=function(h,m,g){var E,p;s&&!s(m,g,function(C){return m.stop(C)},function(C){return m.fail(C)})||((p=""+(E=m.primaryKey))=="[object ArrayBuffer]"&&(p=""+new Uint8Array(E)),A(l,p)||(l[p]=!0,t(h,m,g)))};return Promise.all([e.or._iterate(d,i),Wo(Yo(e,a,i),e.algorithm,d,!e.keysOnly&&e.valueMapper)])}return Wo(Yo(e,a,i),an(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Wo(e,t,i,a){var s=Se(a?function(l,d,h){return i(a(l),d,h)}:i);return e.then(function(l){if(l)return l.start(function(){var d=function(){return l.continue()};t&&!t(l,function(h){return d=h},function(h){l.stop(h),d=we},function(h){l.fail(h),d=we})||s(l.value,l,function(h){return d=h}),d()})})}var zs=(pe.prototype._read=function(e,t){var i=this._ctx;return i.error?i.table._trans(null,Ae.bind(null,i.error)):i.table._trans("readonly",e).then(t)},pe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ae.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},pe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=an(t.algorithm,e)},pe.prototype._iterate=function(e,t){return qr(this._ctx,e,t,this._ctx.table.core)},pe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&x(i,e),t._ctx=i,t},pe.prototype.raw=function(){return this._ctx.valueMapper=null,this},pe.prototype.each=function(e){var t=this._ctx;return this._read(function(i){return qr(t,e,i,t.table.core)})},pe.prototype.count=function(e){var t=this;return this._read(function(i){var a=t._ctx,s=a.table.core;if(Pn(a,!0))return s.count({trans:i,query:{index:Kr(a,s.schema),range:a.range}}).then(function(d){return Math.min(d,a.limit)});var l=0;return qr(a,function(){return++l,!1},i,s).then(function(){return l})}).then(e)},pe.prototype.sortBy=function(e,t){var i=e.split(".").reverse(),a=i[0],s=i.length-1;function l(m,g){return g?l(m[i[g]],g-1):m[a]}var d=this._ctx.dir==="next"?1:-1;function h(m,g){return de(l(m,s),l(g,s))*d}return this.toArray(function(m){return m.sort(h)}).then(t)},pe.prototype.toArray=function(e){var t=this;return this._read(function(i){var a=t._ctx;if(a.dir==="next"&&Pn(a,!0)&&0<a.limit){var s=a.valueMapper,l=Kr(a,a.table.core.schema);return a.table.core.query({trans:i,limit:a.limit,values:!0,query:{index:l,range:a.range}}).then(function(h){return h=h.result,s?h.map(s):h})}var d=[];return qr(a,function(h){return d.push(h)},i,a.table.core).then(function(){return d})},e)},pe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Pn(t)?Ii(t,function(){var i=e;return function(a,s){return i===0||(i===1?--i:s(function(){a.advance(i),i=0}),!1)}}):Ii(t,function(){var i=e;return function(){return--i<0}})),this},pe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ii(this._ctx,function(){var t=e;return function(i,a,s){return--t<=0&&a(s),0<=t}},!0),this},pe.prototype.until=function(e,t){return Di(this._ctx,function(i,a,s){return!e(i.value)||(a(s),t)}),this},pe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},pe.prototype.last=function(e){return this.reverse().first(e)},pe.prototype.filter=function(e){var t;return Di(this._ctx,function(i){return e(i.value)}),(t=this._ctx).isMatch=an(t.isMatch,e),this},pe.prototype.and=function(e){return this.filter(e)},pe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},pe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},pe.prototype.desc=function(){return this.reverse()},pe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,a){e(a.key,a)})},pe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},pe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,a){e(a.primaryKey,a)})},pe.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each(function(a,s){i.push(s.key)}).then(function(){return i}).then(e)},pe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Pn(t,!0)&&0<t.limit)return this._read(function(a){var s=Kr(t,t.table.core.schema);return t.table.core.query({trans:a,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(function(a){return a.result}).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each(function(a,s){i.push(s.primaryKey)}).then(function(){return i}).then(e)},pe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},pe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},pe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},pe.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return Di(this._ctx,function(s){var a=s.primaryKey.toString(),s=A(t,a);return t[a]=!0,!s}),this},pe.prototype.modify=function(e){var t=this,i=this._ctx;return this._write(function(a){var s=typeof e=="function"?e:function(w){return Uo(w,e)},l=i.table.core,g=l.schema.primaryKey,d=g.outbound,h=g.extractKey,m=200,g=t.db._options.modifyChunkSize;g&&(m=typeof g=="object"?g[l.name]||g["*"]||200:g);function E(w,P){var O=P.failures,P=P.numFailures;C+=w-P;for(var I=0,K=v(O);I<K.length;I++){var B=K[I];p.push(O[B])}}var p=[],C=0,_=[],b=e===Go;return t.clone().primaryKeys().then(function(w){function S(P){var I=Math.min(m,w.length-P),K=w.slice(P,P+I);return(b?Promise.resolve([]):l.getMany({trans:a,keys:K,cache:"immutable"})).then(function(B){var N=[],R=[],F=d?[]:null,V=b?K:[];if(!b)for(var L=0;L<I;++L){var U=B[L],re={value:me(U),primKey:w[P+L]};s.call(re,re.value,re)!==!1&&(re.value==null?V.push(w[P+L]):d||de(h(U),h(re.value))===0?(R.push(re.value),d&&F.push(w[P+L])):(V.push(w[P+L]),N.push(re.value)))}return Promise.resolve(0<N.length&&l.mutate({trans:a,type:"add",values:N}).then(function(ae){for(var le in ae.failures)V.splice(parseInt(le),1);E(N.length,ae)})).then(function(){return(0<R.length||O&&typeof e=="object")&&l.mutate({trans:a,type:"put",keys:F,values:R,criteria:O,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<P}).then(function(ae){return E(R.length,ae)})}).then(function(){return(0<V.length||O&&b)&&l.mutate({trans:a,type:"delete",keys:V,criteria:O,isAdditionalChunk:0<P}).then(function(ae){return jr(i.table,V,ae)}).then(function(ae){return E(V.length,ae)})}).then(function(){return w.length>P+I&&S(P+m)})})}var O=Pn(i)&&i.limit===1/0&&(typeof e!="function"||b)&&{index:i.index,range:i.range};return S(0).then(function(){if(0<p.length)throw new En("Error modifying one or more objects",p,C,_);return w.length})})})},pe.prototype.delete=function(){var e=this._ctx,t=e.range;return!Pn(e)||e.table.schema.yProps||!e.isPrimKey&&t.type!==3?this.modify(Go):this._write(function(i){var a=e.table.core.schema.primaryKey,s=t;return e.table.core.count({trans:i,query:{index:a,range:s}}).then(function(l){return e.table.core.mutate({trans:i,type:"deleteRange",range:s}).then(function(m){var h=m.failures,m=m.numFailures;if(m)throw new En("Could not delete some values",Object.keys(h).map(function(g){return h[g]}),l-m);return l-m})})})},pe);function pe(){}var Go=function(e,t){return t.value=null};function Ys(e,t){return e<t?-1:e===t?0:1}function Ws(e,t){return t<e?-1:e===t?0:1}function Xe(e,t,i){return e=e instanceof Xo?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(t),e}function An(e){return new e.Collection(e,function(){return Zo("")}).limit(0)}function Mr(e,t,i,a){var s,l,d,h,m,g,E,p=i.length;if(!i.every(function(b){return typeof b=="string"}))return Xe(e,Fo);function C(b){s=b==="next"?function(S){return S.toUpperCase()}:function(S){return S.toLowerCase()},l=b==="next"?function(S){return S.toLowerCase()}:function(S){return S.toUpperCase()},d=b==="next"?Ys:Ws;var w=i.map(function(S){return{lower:l(S),upper:s(S)}}).sort(function(S,O){return d(S.lower,O.lower)});h=w.map(function(S){return S.upper}),m=w.map(function(S){return S.lower}),E=(g=b)==="next"?"":a}C("next"),e=new e.Collection(e,function(){return Vt(h[0],m[p-1]+a)}),e._ondirectionchange=function(b){C(b)};var _=0;return e._addAlgorithm(function(b,w,S){var O=b.key;if(typeof O!="string")return!1;var P=l(O);if(t(P,m,_))return!0;for(var I=null,K=_;K<p;++K){var B=(function(N,R,F,V,L,U){for(var re=Math.min(N.length,V.length),ae=-1,le=0;le<re;++le){var Qe=R[le];if(Qe!==V[le])return L(N[le],F[le])<0?N.substr(0,le)+F[le]+F.substr(le+1):L(N[le],V[le])<0?N.substr(0,le)+V[le]+F.substr(le+1):0<=ae?N.substr(0,ae)+R[ae]+F.substr(ae+1):null;L(N[le],Qe)<0&&(ae=le)}return re<V.length&&U==="next"?N+F.substr(N.length):re<N.length&&U==="prev"?N.substr(0,F.length):ae<0?null:N.substr(0,ae)+V[ae]+F.substr(ae+1)})(O,P,h[K],m[K],d,g);B===null&&I===null?_=K+1:(I===null||0<d(I,B))&&(I=B)}return w(I!==null?function(){b.continue(I+E)}:S),!1}),e}function Vt(e,t,i,a){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:a}}function Zo(e){return{type:1,lower:e,upper:e}}var Xo=(Object.defineProperty(Me.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Me.prototype.between=function(e,t,i,a){i=i!==!1,a=a===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(i||a)&&(!i||!a)?An(this):new this.Collection(this,function(){return Vt(e,t,!i,!a)})}catch{return Xe(this,At)}},Me.prototype.equals=function(e){return e==null?Xe(this,At):new this.Collection(this,function(){return Zo(e)})},Me.prototype.above=function(e){return e==null?Xe(this,At):new this.Collection(this,function(){return Vt(e,void 0,!0)})},Me.prototype.aboveOrEqual=function(e){return e==null?Xe(this,At):new this.Collection(this,function(){return Vt(e,void 0,!1)})},Me.prototype.below=function(e){return e==null?Xe(this,At):new this.Collection(this,function(){return Vt(void 0,e,!1,!0)})},Me.prototype.belowOrEqual=function(e){return e==null?Xe(this,At):new this.Collection(this,function(){return Vt(void 0,e)})},Me.prototype.startsWith=function(e){return typeof e!="string"?Xe(this,Fo):this.between(e,e+on,!0,!0)},Me.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Mr(this,function(t,i){return t.indexOf(i[0])===0},[e],on)},Me.prototype.equalsIgnoreCase=function(e){return Mr(this,function(t,i){return t===i[0]},[e],"")},Me.prototype.anyOfIgnoreCase=function(){var e=Pe.apply(Ie,arguments);return e.length===0?An(this):Mr(this,function(t,i){return i.indexOf(t)!==-1},e,"")},Me.prototype.startsWithAnyOfIgnoreCase=function(){var e=Pe.apply(Ie,arguments);return e.length===0?An(this):Mr(this,function(t,i){return i.some(function(a){return t.indexOf(a)===0})},e,on)},Me.prototype.anyOf=function(){var e=this,t=Pe.apply(Ie,arguments),i=this._cmp;try{t.sort(i)}catch{return Xe(this,At)}if(t.length===0)return An(this);var a=new this.Collection(this,function(){return Vt(t[0],t[t.length-1])});a._ondirectionchange=function(l){i=l==="next"?e._ascending:e._descending,t.sort(i)};var s=0;return a._addAlgorithm(function(l,d,h){for(var m=l.key;0<i(m,t[s]);)if(++s===t.length)return d(h),!1;return i(m,t[s])===0||(d(function(){l.continue(t[s])}),!1)}),a},Me.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Me.prototype.noneOf=function(){var e=Pe.apply(Ie,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Xe(this,At)}var t=e.reduce(function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[-1/0,a]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Me.prototype.inAnyRange=function(O,t){var i=this,a=this._cmp,s=this._ascending,l=this._descending,d=this._min,h=this._max;if(O.length===0)return An(this);if(!O.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&s(P[0],P[1])<=0}))return Xe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var m=!t||t.includeLowers!==!1,g=t&&t.includeUppers===!0,E,p=s;function C(P,I){return p(P[0],I[0])}try{(E=O.reduce(function(P,I){for(var K=0,B=P.length;K<B;++K){var N=P[K];if(a(I[0],N[1])<0&&0<a(I[1],N[0])){N[0]=d(N[0],I[0]),N[1]=h(N[1],I[1]);break}}return K===B&&P.push(I),P},[])).sort(C)}catch{return Xe(this,At)}var _=0,b=g?function(P){return 0<s(P,E[_][1])}:function(P){return 0<=s(P,E[_][1])},w=m?function(P){return 0<l(P,E[_][0])}:function(P){return 0<=l(P,E[_][0])},S=b,O=new this.Collection(this,function(){return Vt(E[0][0],E[E.length-1][1],!m,!g)});return O._ondirectionchange=function(P){p=P==="next"?(S=b,s):(S=w,l),E.sort(C)},O._addAlgorithm(function(P,I,K){for(var B,N=P.key;S(N);)if(++_===E.length)return I(K),!1;return!b(B=N)&&!w(B)||(i._cmp(N,E[_][1])===0||i._cmp(N,E[_][0])===0||I(function(){p===s?P.continue(E[_][0]):P.continue(E[_][1])}),!1)}),O},Me.prototype.startsWithAnyOf=function(){var e=Pe.apply(Ie,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?An(this):this.inAnyRange(e.map(function(t){return[t,t+on]})):Xe(this,"startsWithAnyOf() only works with strings")},Me);function Me(){}function bt(e){return Se(function(t){return nr(t),e(t.target.error),!1})}function nr(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var rr="storagemutated",ji="x-storagemutated-1",Ht=er(null,rr),Gs=(wt.prototype._lock=function(){return oe(!W.global),++this._reculock,this._reculock!==1||W.global||(W.lockOwnerFor=this),this},wt.prototype._unlock=function(){if(oe(!W.global),--this._reculock==0)for(W.global||(W.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{rn(e[1],e[0])}catch{}}return this},wt.prototype._locked=function(){return this._reculock&&W.lockOwnerFor!==this},wt.prototype.create=function(e){var t=this;if(!this.mode)return this;var i=this.db.idbdb,a=this.db._state.dbOpenError;if(oe(!this.idbtrans),!e&&!i)switch(a&&a.name){case"DatabaseClosedError":throw new J.DatabaseClosed(a);case"MissingAPIError":throw new J.MissingAPI(a.message,a);default:throw new J.OpenFailed(a)}if(!this.active)throw new J.TransactionInactive;return oe(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Se(function(s){nr(s),t._reject(e.error)}),e.onabort=Se(function(s){nr(s),t.active&&t._reject(new J.Abort(e.error)),t.active=!1,t.on("abort").fire(s)}),e.oncomplete=Se(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ht.storagemutated.fire(e.mutatedParts)}),this},wt.prototype._promise=function(e,t,i){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return Ae(new J.ReadOnly("Transaction is readonly"));if(!this.active)return Ae(new J.TransactionInactive);if(this._locked())return new H(function(l,d){a._blockedFuncs.push([function(){a._promise(e,t,i).then(l,d)},W])});if(i)return Ft(function(){var l=new H(function(d,h){a._lock();var m=t(d,h,a);m&&m.then&&m.then(d,h)});return l.finally(function(){return a._unlock()}),l._lib=!0,l});var s=new H(function(l,d){var h=t(l,d,a);h&&h.then&&h.then(l,d)});return s._lib=!0,s},wt.prototype._root=function(){return this.parent?this.parent._root():this},wt.prototype.waitFor=function(e){var t,i=this._root(),a=H.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return a}):(i._waitingFor=a,i._waitingQueue=[],t=i.idbtrans.objectStore(i.storeNames[0]),(function l(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(t.get(-1/0).onsuccess=l)})());var s=i._waitingFor;return new H(function(l,d){a.then(function(h){return i._waitingQueue.push(Se(l.bind(null,h)))},function(h){return i._waitingQueue.push(Se(d.bind(null,h)))}).finally(function(){i._waitingFor===s&&(i._waitingFor=null)})})},wt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new J.Abort))},wt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(A(t,e))return t[e];var i=this.schema[e];if(!i)throw new J.NotFound("Table "+e+" not part of transaction");return i=new this.db.Table(e,i,this),i.core=this.db.core.table(e),t[e]=i},wt);function wt(){}function Ki(e,t,i,a,s,l,d,h){return{name:e,keyPath:t,unique:i,multi:a,auto:s,compound:l,src:(i&&!d?"&":"")+(a?"*":"")+(s?"++":"")+Qo(t),type:h}}function Qo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function qi(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:(a=function(s){return[s.name,s]},i.reduce(function(s,l,d){return d=a(l,d),d&&(s[d[0]]=d[1]),s},{}))};var a}var ir=function(e){try{return e.only([[]]),ir=function(){return[[]]},[[]]}catch{return ir=function(){return on},on}};function Mi(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(i){return i[t]}:function(i){return Z(i,t)}:function(i){return Z(i,e)};var t}function Jo(e){return[].slice.call(e)}var Zs=0;function or(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Xs(e,t,m){function a(S){if(S.type===3)return null;if(S.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=S.lower,b=S.upper,w=S.lowerOpen,S=S.upperOpen;return _===void 0?b===void 0?null:t.upperBound(b,!!S):b===void 0?t.lowerBound(_,!!w):t.bound(_,b,!!w,!!S)}function s(C){var _,b=C.name;return{name:b,schema:C,mutate:function(w){var S=w.trans,O=w.type,P=w.keys,I=w.values,K=w.range;return new Promise(function(B,N){B=Se(B);var R=S.objectStore(b),F=R.keyPath==null,V=O==="put"||O==="add";if(!V&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var L,U=(P||I||{length:1}).length;if(P&&I&&P.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});function re(ze){++Qe,nr(ze)}var ae=[],le=[],Qe=0;if(O==="deleteRange"){if(K.type===4)return B({numFailures:Qe,failures:le,results:[],lastResult:void 0});K.type===3?ae.push(L=R.clear()):ae.push(L=R.delete(a(K)))}else{var F=V?F?[I,P]:[I,null]:[P,null],ne=F[0],He=F[1];if(V)for(var $e=0;$e<U;++$e)ae.push(L=He&&He[$e]!==void 0?R[O](ne[$e],He[$e]):R[O](ne[$e])),L.onerror=re;else for($e=0;$e<U;++$e)ae.push(L=R[O](ne[$e])),L.onerror=re}function Wr(ze){ze=ze.target.result,ae.forEach(function(ln,eo){return ln.error!=null&&(le[eo]=ln.error)}),B({numFailures:Qe,failures:le,results:O==="delete"?P:ae.map(function(ln){return ln.result}),lastResult:ze})}L.onerror=function(ze){re(ze),Wr(ze)},L.onsuccess=Wr})},getMany:function(w){var S=w.trans,O=w.keys;return new Promise(function(P,I){P=Se(P);for(var K,B=S.objectStore(b),N=O.length,R=new Array(N),F=0,V=0,L=function(ae){ae=ae.target,R[ae._pos]=ae.result,++V===F&&P(R)},U=bt(I),re=0;re<N;++re)O[re]!=null&&((K=B.get(O[re]))._pos=re,K.onsuccess=L,K.onerror=U,++F);F===0&&P(R)})},get:function(w){var S=w.trans,O=w.key;return new Promise(function(P,I){P=Se(P);var K=S.objectStore(b).get(O);K.onsuccess=function(B){return P(B.target.result)},K.onerror=bt(I)})},query:(_=g,function(w){return new Promise(function(S,O){S=Se(S);var P,I,K,F=w.trans,B=w.values,N=w.limit,L=w.query,R=N===1/0?void 0:N,V=L.index,L=L.range,F=F.objectStore(b),V=V.isPrimaryKey?F:F.index(V.name),L=a(L);if(N===0)return S({result:[]});_?((R=B?V.getAll(L,R):V.getAllKeys(L,R)).onsuccess=function(U){return S({result:U.target.result})},R.onerror=bt(O)):(P=0,I=!B&&"openKeyCursor"in V?V.openKeyCursor(L):V.openCursor(L),K=[],I.onsuccess=function(U){var re=I.result;return re?(K.push(B?re.value:re.primaryKey),++P===N?S({result:K}):void re.continue()):S({result:K})},I.onerror=bt(O))})}),openCursor:function(w){var S=w.trans,O=w.values,P=w.query,I=w.reverse,K=w.unique;return new Promise(function(B,N){B=Se(B);var V=P.index,R=P.range,F=S.objectStore(b),F=V.isPrimaryKey?F:F.index(V.name),V=I?K?"prevunique":"prev":K?"nextunique":"next",L=!O&&"openKeyCursor"in F?F.openKeyCursor(a(R),V):F.openCursor(a(R),V);L.onerror=bt(N),L.onsuccess=Se(function(U){var re,ae,le,Qe,ne=L.result;ne?(ne.___id=++Zs,ne.done=!1,re=ne.continue.bind(ne),ae=(ae=ne.continuePrimaryKey)&&ae.bind(ne),le=ne.advance.bind(ne),Qe=function(){throw new Error("Cursor not stopped")},ne.trans=S,ne.stop=ne.continue=ne.continuePrimaryKey=ne.advance=function(){throw new Error("Cursor not started")},ne.fail=Se(N),ne.next=function(){var He=this,$e=1;return this.start(function(){return $e--?He.continue():He.stop()}).then(function(){return He})},ne.start=function(He){function $e(){if(L.result)try{He()}catch(ze){ne.fail(ze)}else ne.done=!0,ne.start=function(){throw new Error("Cursor behind last entry")},ne.stop()}var Wr=new Promise(function(ze,ln){ze=Se(ze),L.onerror=bt(ln),ne.fail=ln,ne.stop=function(eo){ne.stop=ne.continue=ne.continuePrimaryKey=ne.advance=Qe,ze(eo)}});return L.onsuccess=Se(function(ze){L.onsuccess=$e,$e()}),ne.continue=re,ne.continuePrimaryKey=ae,ne.advance=le,$e(),Wr},B(ne)):B(null)},N)})},count:function(w){var S=w.query,O=w.trans,P=S.index,I=S.range;return new Promise(function(K,B){var N=O.objectStore(b),R=P.isPrimaryKey?N:N.index(P.name),N=a(I),R=N?R.count(N):R.count();R.onsuccess=Se(function(F){return K(F.target.result)}),R.onerror=bt(B)})}}}var l,d,h,E=(d=m,h=Jo((l=e).objectStoreNames),{schema:{name:l.name,tables:h.map(function(C){return d.objectStore(C)}).map(function(C){var _=C.keyPath,S=C.autoIncrement,b=y(_),w={},S={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_==null,compound:b,keyPath:_,autoIncrement:S,unique:!0,extractKey:Mi(_)},indexes:Jo(C.indexNames).map(function(O){return C.index(O)}).map(function(K){var P=K.name,I=K.unique,B=K.multiEntry,K=K.keyPath,B={name:P,compound:y(K),keyPath:K,unique:I,multiEntry:B,extractKey:Mi(K)};return w[or(K)]=B}),getIndexByKeyPath:function(O){return w[or(O)]}};return w[":id"]=S.primaryKey,_!=null&&(w[or(_)]=S.primaryKey),S})},hasGetAll:0<h.length&&"getAll"in d.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),m=E.schema,g=E.hasGetAll,E=m.tables.map(s),p={};return E.forEach(function(C){return p[C.name]=C}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(C){if(!p[C])throw new Error("Table '".concat(C,"' not found"));return p[C]},MIN_KEY:-1/0,MAX_KEY:ir(t),schema:m}}function Qs(e,t,i,a){var s=i.IDBKeyRange;return i.indexedDB,{dbcore:(a=Xs(t,s,a),e.dbcore.reduce(function(l,d){return d=d.create,u(u({},l),d(l))},a))}}function Rr(e,a){var i=a.db,a=Qs(e._middlewares,i,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(s){var l=s.name;e.core.schema.tables.some(function(d){return d.name===l})&&(s.core=e.core.table(l),e[l]instanceof e.Table&&(e[l].core=s.core))})}function Br(e,t,i,a){i.forEach(function(s){var l=a[s];t.forEach(function(d){var h=(function m(g,E){return $(g,E)||(g=k(g))&&m(g,E)})(d,s);(!h||"value"in h&&h.value===void 0)&&(d===e.Transaction.prototype||d instanceof e.Transaction?D(d,s,{get:function(){return this.table(s)},set:function(m){q(this,s,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):d[s]=new e.Table(s,l))})})}function Ri(e,t){t.forEach(function(i){for(var a in i)i[a]instanceof e.Table&&delete i[a]})}function Js(e,t){return e._cfg.version-t._cfg.version}function eu(e,t,i,a){var s=e._dbSchema;i.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=qi("$meta",ta("")[0],[]),e._storeNames.push("$meta"));var l=e._createTransaction("readwrite",e._storeNames,s);l.create(i),l._completion.catch(a);var d=l._reject.bind(l),h=W.transless||W;Ft(function(){return W.trans=l,W.transless=h,t!==0?(Rr(e,i),g=t,((m=l).storeNames.includes("$meta")?m.table("$meta").get("version").then(function(E){return E??g}):H.resolve(g)).then(function(E){return C=E,_=l,b=i,w=[],E=(p=e)._versions,S=p._dbSchema=Lr(0,p.idbdb,b),(E=E.filter(function(O){return O._cfg.version>=C})).length!==0?(E.forEach(function(O){w.push(function(){var P=S,I=O._cfg.dbschema;Nr(p,P,b),Nr(p,I,b),S=p._dbSchema=I;var K=Bi(P,I);K.add.forEach(function(V){Fi(b,V[0],V[1].primKey,V[1].indexes)}),K.change.forEach(function(V){if(V.recreate)throw new J.Upgrade("Not yet support for changing primary key");var L=b.objectStore(V.name);V.add.forEach(function(U){return Fr(L,U)}),V.change.forEach(function(U){L.deleteIndex(U.name),Fr(L,U)}),V.del.forEach(function(U){return L.deleteIndex(U)})});var B=O._cfg.contentUpgrade;if(B&&O._cfg.version>C){Rr(p,b),_._memoizedTables={};var N=be(I);K.del.forEach(function(V){N[V]=P[V]}),Ri(p,[p.Transaction.prototype]),Br(p,[p.Transaction.prototype],v(N),N),_.schema=N;var R,F=Pt(B);return F&&Cn(),K=H.follow(function(){var V;(R=B(_))&&F&&(V=Lt.bind(null,null),R.then(V,V))}),R&&typeof R.then=="function"?H.resolve(R):K.then(function(){return R})}}),w.push(function(P){var I,K,B=O._cfg.dbschema;I=B,K=P,[].slice.call(K.db.objectStoreNames).forEach(function(N){return I[N]==null&&K.db.deleteObjectStore(N)}),Ri(p,[p.Transaction.prototype]),Br(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),_.schema=p._dbSchema}),w.push(function(P){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===O._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(I){return I!=="$meta"})):P.objectStore("$meta").put(O._cfg.version,"version"))})}),(function O(){return w.length?H.resolve(w.shift()(_.idbtrans)).then(O):H.resolve()})().then(function(){ea(S,b)})):H.resolve();var p,C,_,b,w,S}).catch(d)):(v(s).forEach(function(E){Fi(i,E,s[E].primKey,s[E].indexes)}),Rr(e,i),void H.follow(function(){return e.on.populate.fire(l)}).catch(d));var m,g})}function tu(e,t){ea(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var i=Lr(0,e.idbdb,t);Nr(e,e._dbSchema,t);for(var a=0,s=Bi(i,e._dbSchema).change;a<s.length;a++){var l=(function(d){if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var h=t.objectStore(d.name);d.add.forEach(function(m){_t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(m.src)),Fr(h,m)})})(s[a]);if(typeof l=="object")return l.value}}function Bi(e,t){var i,a={del:[],add:[],change:[]};for(i in e)t[i]||a.del.push(i);for(i in t){var s=e[i],l=t[i];if(s){var d={name:i,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||s.primKey.auto!==l.primKey.auto)d.recreate=!0,a.change.push(d);else{var h=s.idxByName,m=l.idxByName,g=void 0;for(g in h)m[g]||d.del.push(g);for(g in m){var E=h[g],p=m[g];E?E.src!==p.src&&d.change.push(p):d.add.push(p)}(0<d.del.length||0<d.add.length||0<d.change.length)&&a.change.push(d)}}else a.add.push([i,l])}return a}function Fi(e,t,i,a){var s=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return a.forEach(function(l){return Fr(s,l)}),s}function ea(e,t){v(e).forEach(function(i){t.db.objectStoreNames.contains(i)||(_t&&console.debug("Dexie: Creating missing table",i),Fi(t,i,e[i].primKey,e[i].indexes))})}function Fr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Lr(e,t,i){var a={};return ee(t.objectStoreNames,0).forEach(function(s){for(var l=i.objectStore(s),d=Ki(Qo(g=l.keyPath),g||"",!0,!1,!!l.autoIncrement,g&&typeof g!="string",!0),h=[],m=0;m<l.indexNames.length;++m){var E=l.index(l.indexNames[m]),g=E.keyPath,E=Ki(E.name,g,!!E.unique,!!E.multiEntry,!1,g&&typeof g!="string",!1);h.push(E)}a[s]=qi(s,d,h)}),a}function Nr(e,t,i){for(var a=i.db.objectStoreNames,s=0;s<a.length;++s){var l=a[s],d=i.objectStore(l);e._hasGetAll="getAll"in d;for(var h=0;h<d.indexNames.length;++h){var m=d.indexNames[h],g=d.index(m).keyPath,E=typeof g=="string"?g:"["+ee(g).join("+")+"]";!t[l]||(g=t[l].idxByName[E])&&(g.name=m,delete t[l].idxByName[E],t[l].idxByName[m]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ta(e){return e.split(",").map(function(t,i){var l=t.split(":"),a=(s=l[1])===null||s===void 0?void 0:s.trim(),s=(t=l[0].trim()).replace(/([&*]|\+\+)/g,""),l=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return Ki(s,l||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),y(l),i===0,a)})}var nu=(Tn.prototype._createTableSchema=qi,Tn.prototype._parseIndexSyntax=ta,Tn.prototype._parseStoresSpec=function(e,t){var i=this;v(e).forEach(function(a){if(e[a]!==null){var s=i._parseIndexSyntax(e[a]),l=s.shift();if(!l)throw new J.Schema("Invalid schema for table "+a+": "+e[a]);if(l.unique=!0,l.multi)throw new J.Schema("Primary key cannot be multiEntry*");s.forEach(function(d){if(d.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")}),s=i._createTableSchema(a,l,s),t[a]=s}})},Tn.prototype.stores=function(i){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?x(this._cfg.storesSource,i):i;var i=t._versions,a={},s={};return i.forEach(function(l){x(a,l._cfg.storesSource),s=l._cfg.dbschema={},l._parseStoresSpec(a,s)}),t._dbSchema=s,Ri(t,[t._allTables,t,t.Transaction.prototype]),Br(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],v(s),s),t._storeNames=v(s),this},Tn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=bi(this._cfg.contentUpgrade||we,e),this},Tn);function Tn(){}function Li(e,t){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Tt(Dr,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Ni(e){return e&&typeof e.databases=="function"}function Vi(e){return Ft(function(){return W.letThrough=!0,e()})}function Hi(e){return!("from"in e)}var Ve=function(e,t){if(!this){var i=new Ve;return e&&"d"in e&&x(i,e),i}x(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function ar(e,t,i){var a=de(t,i);if(!isNaN(a)){if(0<a)throw RangeError();if(Hi(e))return x(e,{from:t,to:i,d:1});var s=e.l,a=e.r;if(de(i,e.from)<0)return s?ar(s,t,i):e.l={from:t,to:i,d:1,l:null,r:null},ra(e);if(0<de(t,e.to))return a?ar(a,t,i):e.r={from:t,to:i,d:1,l:null,r:null},ra(e);de(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),0<de(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),i=!e.r,s&&!e.l&&sr(e,s),a&&i&&sr(e,a)}}function sr(e,t){Hi(t)||(function i(a,m){var l=m.from,d=m.to,h=m.l,m=m.r;ar(a,l,d),h&&i(a,h),m&&i(a,m)})(e,t)}function na(e,t){var i=Vr(t),a=i.next();if(a.done)return!1;for(var s=a.value,l=Vr(e),d=l.next(s.from),h=d.value;!a.done&&!d.done;){if(de(h.from,s.to)<=0&&0<=de(h.to,s.from))return!0;de(s.from,h.from)<0?s=(a=i.next(h.from)).value:h=(d=l.next(s.from)).value}return!1}function Vr(e){var t=Hi(e)?null:{s:0,n:e};return{next:function(i){for(var a=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&de(i,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||de(i,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ra(e){var t,i,a=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),s=1<a?"r":a<-1?"l":"";s&&(t=s=="r"?"l":"r",i=u({},e),a=e[s],e.from=a.from,e.to=a.to,e[s]=a[s],i[s]=a[t],(e[t]=i).d=ia(i)),e.d=ia(e)}function ia(i){var t=i.r,i=i.l;return(t?i?Math.max(t.d,i.d):t.d:i?i.d:0)+1}function Hr(e,t){return v(t).forEach(function(i){e[i]?sr(e[i],t[i]):e[i]=(function a(s){var l,d,h={};for(l in s)A(s,l)&&(d=s[l],h[l]=!d||typeof d!="object"||Be.has(d.constructor)?d:a(d));return h})(t[i])}),e}function $i(e,t){return e.all||t.all||Object.keys(e).some(function(i){return t[i]&&na(t[i],e[i])})}j(Ve.prototype,((nt={add:function(e){return sr(this,e),this},addKey:function(e){return ar(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(i){return ar(t,i,i)}),this},hasKey:function(e){var t=Vr(this).next(e).value;return t&&de(t.from,e)<=0&&0<=de(t.to,e)}})[ve]=function(){return Vr(this)},nt));var sn={},Ui={},zi=!1;function $r(e){Hr(Ui,e),zi||(zi=!0,setTimeout(function(){zi=!1,Yi(Ui,!(Ui={}))},0))}function Yi(e,t){t===void 0&&(t=!1);var i=new Set;if(e.all)for(var a=0,s=Object.values(sn);a<s.length;a++)oa(d=s[a],e,i,t);else for(var l in e){var d,h=/^idb\:\/\/(.*)\/(.*)\//.exec(l);h&&(l=h[1],h=h[2],(d=sn["idb://".concat(l,"/").concat(h)])&&oa(d,e,i,t))}i.forEach(function(m){return m()})}function oa(e,t,i,a){for(var s=[],l=0,d=Object.entries(e.queries.query);l<d.length;l++){for(var h=d[l],m=h[0],g=[],E=0,p=h[1];E<p.length;E++){var C=p[E];$i(t,C.obsSet)?C.subscribers.forEach(function(S){return i.add(S)}):a&&g.push(C)}a&&s.push([m,g])}if(a)for(var _=0,b=s;_<b.length;_++){var w=b[_],m=w[0],g=w[1];e.queries.query[m]=g}}function ru(e){var t=e._state,i=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ae(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,s=Math.round(10*e.verno),l=!1;function d(){if(t.openCanceller!==a)throw new J.DatabaseClosed("db.open() was cancelled")}function h(){return new H(function(C,_){if(d(),!i)throw new J.MissingAPI;var b=e.name,w=t.autoSchema||!s?i.open(b):i.open(b,s);if(!w)throw new J.MissingAPI;w.onerror=bt(_),w.onblocked=Se(e._fireOnBlocked),w.onupgradeneeded=Se(function(S){var O;E=w.transaction,t.autoSchema&&!e._options.allowEmptyDB?(w.onerror=nr,E.abort(),w.result.close(),(O=i.deleteDatabase(b)).onsuccess=O.onerror=Se(function(){_(new J.NoSuchDatabase("Database ".concat(b," doesnt exist")))})):(E.onerror=bt(_),S=S.oldVersion>Math.pow(2,62)?0:S.oldVersion,p=S<1,e.idbdb=w.result,l&&tu(e,E),eu(e,S/10,E,_))},_),w.onsuccess=Se(function(){E=null;var S,O,P,I,K,B=e.idbdb=w.result,N=ee(B.objectStoreNames);if(0<N.length)try{var R=B.transaction((I=N).length===1?I[0]:I,"readonly");if(t.autoSchema)O=B,P=R,(S=e).verno=O.version/10,P=S._dbSchema=Lr(0,O,P),S._storeNames=ee(O.objectStoreNames,0),Br(S,[S._allTables],v(P),P);else if(Nr(e,e._dbSchema,R),((K=Bi(Lr(0,(K=e).idbdb,R),K._dbSchema)).add.length||K.change.some(function(F){return F.add.length||F.change.length}))&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),B.close(),s=B.version+1,l=!0,C(h());Rr(e,R)}catch{}On.push(e),B.onversionchange=Se(function(F){t.vcFired=!0,e.on("versionchange").fire(F)}),B.onclose=Se(function(){e.close({disableAutoOpen:!1})}),p&&(K=e._deps,R=b,B=K.indexedDB,K=K.IDBKeyRange,Ni(B)||R===Dr||Li(B,K).put({name:R}).catch(we)),C()},_)}).catch(function(C){switch(C?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h();break;case"VersionError":if(0<s)return s=0,h()}return H.reject(C)})}var m,g=t.dbReadyResolve,E=null,p=!1;return H.race([a,(typeof navigator>"u"?H.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function _(){return indexedDB.databases().finally(C)}m=setInterval(_,100),_()}).finally(function(){return clearInterval(m)}):Promise.resolve()).then(h)]).then(function(){return d(),t.onReadyBeingFired=[],H.resolve(Vi(function(){return e.on.ready.fire(e.vip)})).then(function C(){if(0<t.onReadyBeingFired.length){var _=t.onReadyBeingFired.reduce(bi,we);return t.onReadyBeingFired=[],H.resolve(Vi(function(){return _(e.vip)})).then(C)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(C){t.dbOpenError=C;try{E&&E.abort()}catch{}return a===t.openCanceller&&e._close(),Ae(C)}).finally(function(){t.openComplete=!0,g()}).then(function(){var C;return p&&(C={},e.tables.forEach(function(_){_.schema.indexes.forEach(function(b){b.name&&(C["idb://".concat(e.name,"/").concat(_.name,"/").concat(b.name)]=new Ve(-1/0,[[[]]]))}),C["idb://".concat(e.name,"/").concat(_.name,"/")]=C["idb://".concat(e.name,"/").concat(_.name,"/:dels")]=new Ve(-1/0,[[[]]])}),Ht(rr).fire(C),Yi(C,!0)),e})}function Wi(e){function t(l){return e.next(l)}var i=s(t),a=s(function(l){return e.throw(l)});function s(l){return function(m){var h=l(m),m=h.value;return h.done?m:m&&typeof m.then=="function"?m.then(i,a):y(m)?Promise.all(m).then(i,a):i(m)}}return s(t)()}function Ur(e,t,i){for(var a=y(e)?e.slice():[e],s=0;s<i;++s)a.push(t);return a}var iu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return u(u({},e),{table:function(t){var i=e.table(t),a=i.schema,s={},l=[];function d(p,C,_){var b=or(p),w=s[b]=s[b]||[],S=p==null?0:typeof p=="string"?1:p.length,O=0<C,O=u(u({},_),{name:O?"".concat(b,"(virtual-from:").concat(_.name,")"):_.name,lowLevelIndex:_,isVirtual:O,keyTail:C,keyLength:S,extractKey:Mi(p),unique:!O&&_.unique});return w.push(O),O.isPrimaryKey||l.push(O),1<S&&d(S===2?p[0]:p.slice(0,S-1),C+1,_),w.sort(function(P,I){return P.keyTail-I.keyTail}),O}t=d(a.primaryKey.keyPath,0,a.primaryKey),s[":id"]=[t];for(var h=0,m=a.indexes;h<m.length;h++){var g=m[h];d(g.keyPath,0,g)}function E(p){var C,_=p.query.index;return _.isVirtual?u(u({},p),{query:{index:_.lowLevelIndex,range:(C=p.query.range,_=_.keyTail,{type:C.type===1?2:C.type,lower:Ur(C.lower,C.lowerOpen?e.MAX_KEY:e.MIN_KEY,_),lowerOpen:!0,upper:Ur(C.upper,C.upperOpen?e.MIN_KEY:e.MAX_KEY,_),upperOpen:!0})}}):p}return u(u({},i),{schema:u(u({},a),{primaryKey:t,indexes:l,getIndexByKeyPath:function(p){return(p=s[or(p)])&&p[0]}}),count:function(p){return i.count(E(p))},query:function(p){return i.query(E(p))},openCursor:function(p){var C=p.query.index,_=C.keyTail,b=C.isVirtual,w=C.keyLength;return b?i.openCursor(E(p)).then(function(O){return O&&S(O)}):i.openCursor(p);function S(O){return Object.create(O,{continue:{value:function(P){P!=null?O.continue(Ur(P,p.reverse?e.MAX_KEY:e.MIN_KEY,_)):p.unique?O.continue(O.key.slice(0,w).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,_)):O.continue()}},continuePrimaryKey:{value:function(P,I){O.continuePrimaryKey(Ur(P,e.MAX_KEY,_),I)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var P=O.key;return w===1?P[0]:P.slice(0,w)}},value:{get:function(){return O.value}}})}}})}})}};function Gi(e,t,i,a){return i=i||{},a=a||"",v(e).forEach(function(s){var l,d,h;A(t,s)?(l=e[s],d=t[s],typeof l=="object"&&typeof d=="object"&&l&&d?(h=ye(l))!==ye(d)?i[a+s]=t[s]:h==="Object"?Gi(l,d,i,a+s+"."):l!==d&&(i[a+s]=t[s]):l!==d&&(i[a+s]=t[s])):i[a+s]=void 0}),v(t).forEach(function(s){A(e,s)||(i[a+s]=t[s])}),i}function Zi(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ou={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return u(u({},e),{table:function(t){var i=e.table(t),a=i.schema.primaryKey;return u(u({},i),{mutate:function(s){var l=W.trans,d=l.table(t).hook,h=d.deleting,m=d.creating,g=d.updating;switch(s.type){case"add":if(m.fire===we)break;return l._promise("readwrite",function(){return E(s)},!0);case"put":if(m.fire===we&&g.fire===we)break;return l._promise("readwrite",function(){return E(s)},!0);case"delete":if(h.fire===we)break;return l._promise("readwrite",function(){return E(s)},!0);case"deleteRange":if(h.fire===we)break;return l._promise("readwrite",function(){return(function p(C,_,b){return i.query({trans:C,values:!1,query:{index:a,range:_},limit:b}).then(function(w){var S=w.result;return E({type:"delete",keys:S,trans:C}).then(function(O){return 0<O.numFailures?Promise.reject(O.failures[0]):S.length<b?{failures:[],numFailures:0,lastResult:void 0}:p(C,u(u({},_),{lower:S[S.length-1],lowerOpen:!0}),b)})})})(s.trans,s.range,1e4)},!0)}return i.mutate(s);function E(p){var C,_,b,w=W.trans,S=p.keys||Zi(a,p);if(!S)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?u(u({},p),{keys:S}):u({},p)).type!=="delete"&&(p.values=f([],p.values)),p.keys&&(p.keys=f([],p.keys)),C=i,b=S,((_=p).type==="add"?Promise.resolve([]):C.getMany({trans:_.trans,keys:b,cache:"immutable"})).then(function(O){var P=S.map(function(I,K){var B,N,R,F=O[K],V={onerror:null,onsuccess:null};return p.type==="delete"?h.fire.call(V,I,F,w):p.type==="add"||F===void 0?(B=m.fire.call(V,I,p.values[K],w),I==null&&B!=null&&(p.keys[K]=I=B,a.outbound||Y(p.values[K],a.keyPath,I))):(B=Gi(F,p.values[K]),(N=g.fire.call(V,B,I,F,w))&&(R=p.values[K],Object.keys(N).forEach(function(L){A(R,L)?R[L]=N[L]:Y(R,L,N[L])}))),V});return i.mutate(p).then(function(I){for(var K=I.failures,B=I.results,N=I.numFailures,I=I.lastResult,R=0;R<S.length;++R){var F=(B||S)[R],V=P[R];F==null?V.onerror&&V.onerror(K[R]):V.onsuccess&&V.onsuccess(p.type==="put"&&O[R]?p.values[R]:F)}return{failures:K,results:B,numFailures:N,lastResult:I}}).catch(function(I){return P.forEach(function(K){return K.onerror&&K.onerror(I)}),Promise.reject(I)})})}}})}})}};function aa(e,t,i){try{if(!t||t.keys.length<e.length)return null;for(var a=[],s=0,l=0;s<t.keys.length&&l<e.length;++s)de(t.keys[s],e[l])===0&&(a.push(i?me(t.values[s]):t.values[s]),++l);return a.length===e.length?a:null}catch{return null}}var au={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var i=e.table(t);return u(u({},i),{getMany:function(a){if(!a.cache)return i.getMany(a);var s=aa(a.keys,a.trans._cache,a.cache==="clone");return s?H.resolve(s):i.getMany(a).then(function(l){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?me(l):l},l})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),i.mutate(a)}})}}}};function sa(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function ua(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var su={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,i=new Ve(e.MIN_KEY,e.MAX_KEY);return u(u({},e),{transaction:function(a,s,l){if(W.subscr&&s!=="readonly")throw new J.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(W.querier));return e.transaction(a,s,l)},table:function(a){var s=e.table(a),l=s.schema,d=l.primaryKey,p=l.indexes,h=d.extractKey,m=d.outbound,g=d.autoIncrement&&p.filter(function(_){return _.compound&&_.keyPath.includes(d.keyPath)}),E=u(u({},s),{mutate:function(_){function b(L){return L="idb://".concat(t,"/").concat(a,"/").concat(L),I[L]||(I[L]=new Ve)}var w,S,O,P=_.trans,I=_.mutatedParts||(_.mutatedParts={}),K=b(""),B=b(":dels"),N=_.type,V=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[Zi(d,_).filter(function(L){return L}),_.values]:[],R=V[0],F=V[1],V=_.trans._cache;return y(R)?(K.addKeys(R),(V=N==="delete"||R.length===F.length?aa(R,V):null)||B.addKeys(R),(V||F)&&(w=b,S=V,O=F,l.indexes.forEach(function(L){var U=w(L.name||"");function re(le){return le!=null?L.extractKey(le):null}function ae(le){return L.multiEntry&&y(le)?le.forEach(function(Qe){return U.addKey(Qe)}):U.addKey(le)}(S||O).forEach(function(le,He){var ne=S&&re(S[He]),He=O&&re(O[He]);de(ne,He)!==0&&(ne!=null&&ae(ne),He!=null&&ae(He))})}))):R?(F={from:(F=R.lower)!==null&&F!==void 0?F:e.MIN_KEY,to:(F=R.upper)!==null&&F!==void 0?F:e.MAX_KEY},B.add(F),K.add(F)):(K.add(i),B.add(i),l.indexes.forEach(function(L){return b(L.name).add(i)})),s.mutate(_).then(function(L){return!R||_.type!=="add"&&_.type!=="put"||(K.addKeys(L.results),g&&g.forEach(function(U){for(var re=_.values.map(function(ne){return U.extractKey(ne)}),ae=U.keyPath.findIndex(function(ne){return ne===d.keyPath}),le=0,Qe=L.results.length;le<Qe;++le)re[le][ae]=L.results[le];b(U.name).addKeys(re)})),P.mutatedParts=Hr(P.mutatedParts||{},I),L})}}),p=function(b){var w=b.query,b=w.index,w=w.range;return[b,new Ve((b=w.lower)!==null&&b!==void 0?b:e.MIN_KEY,(w=w.upper)!==null&&w!==void 0?w:e.MAX_KEY)]},C={get:function(_){return[d,new Ve(_.key)]},getMany:function(_){return[d,new Ve().addKeys(_.keys)]},count:p,query:p,openCursor:p};return v(C).forEach(function(_){E[_]=function(b){var w=W.subscr,S=!!w,O=sa(W,s)&&ua(_,b)?b.obsSet={}:w;if(S){var P=function(F){return F="idb://".concat(t,"/").concat(a,"/").concat(F),O[F]||(O[F]=new Ve)},I=P(""),K=P(":dels"),w=C[_](b),S=w[0],w=w[1];if((_==="query"&&S.isPrimaryKey&&!b.values?K:P(S.name||"")).add(w),!S.isPrimaryKey){if(_!=="count"){var B=_==="query"&&m&&b.values&&s.query(u(u({},b),{values:!1}));return s[_].apply(this,arguments).then(function(F){if(_==="query"){if(m&&b.values)return B.then(function(re){return re=re.result,I.addKeys(re),F});var V=b.values?F.result.map(h):F.result;(b.values?I:K).addKeys(V)}else if(_==="openCursor"){var L=F,U=b.values;return L&&Object.create(L,{key:{get:function(){return K.addKey(L.primaryKey),L.key}},primaryKey:{get:function(){var re=L.primaryKey;return K.addKey(re),re}},value:{get:function(){return U&&I.addKey(L.primaryKey),L.value}}})}return F})}K.add(i)}}return s[_].apply(this,arguments)}}),E}})}};function la(e,t,i){if(i.numFailures===0)return t;if(t.type==="deleteRange")return null;var a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return i.numFailures===a?null:(t=u({},t),y(t.keys)&&(t.keys=t.keys.filter(function(s,l){return!(l in i.failures)})),"values"in t&&y(t.values)&&(t.values=t.values.filter(function(s,l){return!(l in i.failures)})),t)}function Xi(e,t){return i=e,((a=t).lower===void 0||(a.lowerOpen?0<de(i,a.lower):0<=de(i,a.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?de(e,t.upper)<0:de(e,t.upper)<=0));var i,a}function ca(e,t,C,a,s,l){if(!C||C.length===0)return e;var d=t.query.index,h=d.multiEntry,m=t.query.range,g=a.schema.primaryKey.extractKey,E=d.extractKey,p=(d.lowLevelIndex||d).extractKey,C=C.reduce(function(_,b){var w=_,S=[];if(b.type==="add"||b.type==="put")for(var O=new Ve,P=b.values.length-1;0<=P;--P){var I,K=b.values[P],B=g(K);O.hasKey(B)||(I=E(K),(h&&y(I)?I.some(function(L){return Xi(L,m)}):Xi(I,m))&&(O.addKey(B),S.push(K)))}switch(b.type){case"add":var N=new Ve().addKeys(t.values?_.map(function(U){return g(U)}):_),w=_.concat(t.values?S.filter(function(U){return U=g(U),!N.hasKey(U)&&(N.addKey(U),!0)}):S.map(function(U){return g(U)}).filter(function(U){return!N.hasKey(U)&&(N.addKey(U),!0)}));break;case"put":var R=new Ve().addKeys(b.values.map(function(U){return g(U)}));w=_.filter(function(U){return!R.hasKey(t.values?g(U):U)}).concat(t.values?S:S.map(function(U){return g(U)}));break;case"delete":var F=new Ve().addKeys(b.keys);w=_.filter(function(U){return!F.hasKey(t.values?g(U):U)});break;case"deleteRange":var V=b.range;w=_.filter(function(U){return!Xi(g(U),V)})}return w},e);return C===e?e:(C.sort(function(_,b){return de(p(_),p(b))||de(g(_),g(b))}),t.limit&&t.limit<1/0&&(C.length>t.limit?C.length=t.limit:e.length===t.limit&&C.length<t.limit&&(s.dirty=!0)),l?Object.freeze(C):C)}function fa(e,t){return de(e.lower,t.lower)===0&&de(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function uu(e,t){return(function(i,a,s,l){if(i===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=de(i,a))===0){if(s&&l)return 0;if(s)return 1;if(l)return-1}return a})(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=(function(i,a,s,l){if(i===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=de(i,a))===0){if(s&&l)return 0;if(s)return-1;if(l)return 1}return a})(e.upper,t.upper,e.upperOpen,t.upperOpen)}function lu(e,t,i,a){e.subscribers.add(i),a.addEventListener("abort",function(){var s,l;e.subscribers.delete(i),e.subscribers.size===0&&(s=e,l=t,setTimeout(function(){s.subscribers.size===0&&ge(l,s)},3e3))})}var cu={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return u(u({},e),{transaction:function(i,a,s){var l,d,h=e.transaction(i,a,s);return a==="readwrite"&&(d=(l=new AbortController).signal,s=function(m){return function(){if(l.abort(),a==="readwrite"){for(var g=new Set,E=0,p=i;E<p.length;E++){var C=p[E],_=sn["idb://".concat(t,"/").concat(C)];if(_){var b=e.table(C),w=_.optimisticOps.filter(function(U){return U.trans===h});if(h._explicit&&m&&h.mutatedParts)for(var S=0,O=Object.values(_.queries.query);S<O.length;S++)for(var P=0,I=(N=O[S]).slice();P<I.length;P++)$i((R=I[P]).obsSet,h.mutatedParts)&&(ge(N,R),R.subscribers.forEach(function(U){return g.add(U)}));else if(0<w.length){_.optimisticOps=_.optimisticOps.filter(function(U){return U.trans!==h});for(var K=0,B=Object.values(_.queries.query);K<B.length;K++)for(var N,R,F,V=0,L=(N=B[K]).slice();V<L.length;V++)(R=L[V]).res!=null&&h.mutatedParts&&(m&&!R.dirty?(F=Object.isFrozen(R.res),F=ca(R.res,R.req,w,b,R,F),R.dirty?(ge(N,R),R.subscribers.forEach(function(U){return g.add(U)})):F!==R.res&&(R.res=F,R.promise=H.resolve({result:F}))):(R.dirty&&ge(N,R),R.subscribers.forEach(function(U){return g.add(U)})))}}}g.forEach(function(U){return U()})}}},h.addEventListener("abort",s(!1),{signal:d}),h.addEventListener("error",s(!1),{signal:d}),h.addEventListener("complete",s(!0),{signal:d})),h},table:function(i){var a=e.table(i),s=a.schema.primaryKey;return u(u({},a),{mutate:function(l){var d=W.trans;if(s.outbound||d.db._options.cache==="disabled"||d.explicit||d.idbtrans.mode!=="readwrite")return a.mutate(l);var h=sn["idb://".concat(t,"/").concat(i)];return h?(d=a.mutate(l),l.type!=="add"&&l.type!=="put"||!(50<=l.values.length||Zi(s,l).some(function(m){return m==null}))?(h.optimisticOps.push(l),l.mutatedParts&&$r(l.mutatedParts),d.then(function(m){0<m.numFailures&&(ge(h.optimisticOps,l),(m=la(0,l,m))&&h.optimisticOps.push(m),l.mutatedParts&&$r(l.mutatedParts))}),d.catch(function(){ge(h.optimisticOps,l),l.mutatedParts&&$r(l.mutatedParts)})):d.then(function(m){var g=la(0,u(u({},l),{values:l.values.map(function(E,p){var C;return m.failures[p]?E:(E=(C=s.keyPath)!==null&&C!==void 0&&C.includes(".")?me(E):u({},E),Y(E,s.keyPath,m.results[p]),E)})}),m);h.optimisticOps.push(g),queueMicrotask(function(){return l.mutatedParts&&$r(l.mutatedParts)})}),d):a.mutate(l)},query:function(l){if(!sa(W,a)||!ua("query",l))return a.query(l);var d=((g=W.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",p=W,h=p.requery,m=p.signal,g=(function(b,w,S,O){var P=sn["idb://".concat(b,"/").concat(w)];if(!P)return[];if(!(w=P.queries[S]))return[null,!1,P,null];var I=w[(O.query?O.query.index.name:null)||""];if(!I)return[null,!1,P,null];switch(S){case"query":var K=I.find(function(B){return B.req.limit===O.limit&&B.req.values===O.values&&fa(B.req.query.range,O.query.range)});return K?[K,!0,P,I]:[I.find(function(B){return("limit"in B.req?B.req.limit:1/0)>=O.limit&&(!O.values||B.req.values)&&uu(B.req.query.range,O.query.range)}),!1,P,I];case"count":return K=I.find(function(B){return fa(B.req.query.range,O.query.range)}),[K,!!K,P,I]}})(t,i,"query",l),E=g[0],p=g[1],C=g[2],_=g[3];return E&&p?E.obsSet=l.obsSet:(p=a.query(l).then(function(b){var w=b.result;if(E&&(E.res=w),d){for(var S=0,O=w.length;S<O;++S)Object.freeze(w[S]);Object.freeze(w)}else b.result=me(w);return b}).catch(function(b){return _&&E&&ge(_,E),Promise.reject(b)}),E={obsSet:l.obsSet,promise:p,subscribers:new Set,type:"query",req:l,dirty:!1},_?_.push(E):(_=[E],(C=C||(sn["idb://".concat(t,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[l.query.index.name||""]=_)),lu(E,_,h,m),E.promise.then(function(b){return{result:ca(b.result,l,C?.optimisticOps,a,E,d)}})}})}})}};function zr(e,t){return new Proxy(e,{get:function(i,a,s){return a==="db"?t:Reflect.get(i,a,s)}})}var Tt=(Te.prototype.version=function(e){if(isNaN(e)||e<.1)throw new J.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,i=t.filter(function(a){return a._cfg.version===e})[0];return i||(i=new this.Version(e),t.push(i),t.sort(Js),i.stores({}),this._state.autoSchema=!1,i)},Te.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||W.letThrough||this._vip)?e():new H(function(i,a){if(t._state.openComplete)return a(new J.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void a(new J.DatabaseClosed);t.open().catch(we)}t._state.dbReadyPromise.then(i,a)}).then(e)},Te.prototype.use=function(e){var t=e.stack,i=e.create,a=e.level,s=e.name;return s&&this.unuse({stack:t,name:s}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:i,level:a??10,name:s}),e.sort(function(l,d){return l.level-d.level}),this},Te.prototype.unuse=function(e){var t=e.stack,i=e.name,a=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(s){return a?s.create!==a:!!i&&s.name!==i})),this},Te.prototype.open=function(){var e=this;return rn(Bt,function(){return ru(e)})},Te.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=On.indexOf(this);if(0<=t&&On.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new H(function(i){e.dbReadyResolve=i}),e.openCanceller=new H(function(i,a){e.cancelOpen=a}))},Te.prototype.close=function(i){var t=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;t?(i.isBeingOpened&&i.cancelOpen(new J.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new J.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},Te.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new H(function(s,l){function d(){t.close(e);var h=t._deps.indexedDB.deleteDatabase(t.name);h.onsuccess=Se(function(){var m,g,E;m=t._deps,g=t.name,E=m.indexedDB,m=m.IDBKeyRange,Ni(E)||g===Dr||Li(E,m).delete(g).catch(we),s()}),h.onerror=bt(l),h.onblocked=t._fireOnBlocked}if(i)throw new J.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(d):d()})},Te.prototype.backendDB=function(){return this.idbdb},Te.prototype.isOpen=function(){return this.idbdb!==null},Te.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Te.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Te.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Te.prototype,"tables",{get:function(){var e=this;return v(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Te.prototype.transaction=function(){var e=(function(t,i,a){var s=arguments.length;if(s<2)throw new J.InvalidArgument("Too few arguments");for(var l=new Array(s-1);--s;)l[s-1]=arguments[s];return a=l.pop(),[t,Ke(l),a]}).apply(this,arguments);return this._transaction.apply(this,e)},Te.prototype._transaction=function(e,t,i){var a=this,s=W.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);var l,d,h=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(d=t.map(function(g){if(g=g instanceof a.Table?g.name:g,typeof g!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),e=="r"||e===Ai)l=Ai;else{if(e!="rw"&&e!=Ti)throw new J.InvalidArgument("Invalid transaction mode: "+e);l=Ti}if(s){if(s.mode===Ai&&l===Ti){if(!h)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&d.forEach(function(g){if(s&&s.storeNames.indexOf(g)===-1){if(!h)throw new J.SubTransaction("Table "+g+" not included in parent transaction.");s=null}}),h&&s&&!s.active&&(s=null)}}catch(g){return s?s._promise(null,function(E,p){p(g)}):Ae(g)}var m=(function g(E,p,C,_,b){return H.resolve().then(function(){var w=W.transless||W,S=E._createTransaction(p,C,E._dbSchema,_);if(S.explicit=!0,w={trans:S,transless:w},_)S.idbtrans=_.idbtrans;else try{S.create(),S.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(I){return I.name===_i.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return g(E,p,C,null,b)})):Ae(I)}var O,P=Pt(b);return P&&Cn(),w=H.follow(function(){var I;(O=b.call(S,S))&&(P?(I=Lt.bind(null,null),O.then(I,I)):typeof O.next=="function"&&typeof O.throw=="function"&&(O=Wi(O)))},w),(O&&typeof O.then=="function"?H.resolve(O).then(function(I){return S.active?I:Ae(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):w.then(function(){return O})).then(function(I){return _&&S._resolve(),S._completion.then(function(){return I})}).catch(function(I){return S._reject(I),Ae(I)})})}).bind(null,this,l,d,s,i);return s?s._promise(l,m,"lock"):W.trans?rn(W.transless,function(){return a._whenReady(m)}):this._whenReady(m)},Te.prototype.table=function(e){if(!A(this._allTables,e))throw new J.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Te);function Te(e,t){var i=this;this._middlewares={},this.verno=0;var a=Te.dependencies;this._options=t=u({addons:Te.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},a=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,l,d,h,m,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:we,dbReadyPromise:null,cancelOpen:we,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};g.dbReadyPromise=new H(function(p){g.dbReadyResolve=p}),g.openCanceller=new H(function(p,C){g.cancelOpen=C}),this._state=g,this.name=e,this.on=er(this,"populate","blocked","versionchange","close",{ready:[bi,we]}),this.once=function(p,C){var _=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];i.on(p).unsubscribe(_),C.apply(i,b)};return i.on(p,_)},this.on.ready.subscribe=Q(this.on.ready.subscribe,function(p){return function(C,_){Te.vip(function(){var b,w=i._state;w.openComplete?(w.dbOpenError||H.resolve().then(C),_&&p(C)):w.onReadyBeingFired?(w.onReadyBeingFired.push(C),_&&p(C)):(p(C),b=i,_||p(function S(){b.on.ready.unsubscribe(C),b.on.ready.unsubscribe(S)}))})}}),this.Collection=(s=this,tr(zs.prototype,function(O,S){this.db=s;var _=Lo,b=null;if(S)try{_=S()}catch(P){b=P}var w=O._ctx,S=w.table,O=S.hook.reading.fire;this._ctx={table:S,index:w.index,isPrimKey:!w.index||S.schema.primKey.keyPath&&w.index===S.schema.primKey.name,range:_,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:b,or:w.or,valueMapper:O!==Wn?O:null}})),this.Table=(l=this,tr(zo.prototype,function(p,C,_){this.db=l,this._tx=_,this.name=p,this.schema=C,this.hook=l._allTables[p]?l._allTables[p].hook:er(null,{creating:[Rs,we],reading:[Ms,Wn],updating:[Fs,we],deleting:[Bs,we]})})),this.Transaction=(d=this,tr(Gs.prototype,function(p,C,_,b,w){var S=this;p!=="readonly"&&C.forEach(function(O){O=(O=_[O])===null||O===void 0?void 0:O.yProps,O&&(C=C.concat(O.map(function(P){return P.updatesTable})))}),this.db=d,this.mode=p,this.storeNames=C,this.schema=_,this.chromeTransactionDurability=b,this.idbtrans=null,this.on=er(this,"complete","error","abort"),this.parent=w||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new H(function(O,P){S._resolve=O,S._reject=P}),this._completion.then(function(){S.active=!1,S.on.complete.fire()},function(O){var P=S.active;return S.active=!1,S.on.error.fire(O),S.parent?S.parent._reject(O):P&&S.idbtrans&&S.idbtrans.abort(),Ae(O)})})),this.Version=(h=this,tr(nu.prototype,function(p){this.db=h,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(m=this,tr(Xo.prototype,function(p,C,_){if(this.db=m,this._ctx={table:p,index:C===":id"?null:C,or:_},this._cmp=this._ascending=de,this._descending=function(b,w){return de(w,b)},this._max=function(b,w){return 0<de(b,w)?b:w},this._min=function(b,w){return de(b,w)<0?b:w},this._IDBKeyRange=m._deps.IDBKeyRange,!this._IDBKeyRange)throw new J.MissingAPI})),this.on("versionchange",function(p){0<p.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=ir(t.IDBKeyRange),this._createTransaction=function(p,C,_,b){return new i.Transaction(p,C,_,i._options.chromeTransactionDurability,b)},this._fireOnBlocked=function(p){i.on("blocked").fire(p),On.filter(function(C){return C.name===i.name&&C!==i&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(p)})},this.use(au),this.use(cu),this.use(su),this.use(iu),this.use(ou);var E=new Proxy(this,{get:function(p,C,_){if(C==="_vip")return!0;if(C==="table")return function(w){return zr(i.table(w),E)};var b=Reflect.get(p,C,_);return b instanceof zo?zr(b,E):C==="tables"?b.map(function(w){return zr(w,E)}):C==="_createTransaction"?function(){return zr(b.apply(this,arguments),E)}:b}});this.vip=E,a.forEach(function(p){return p(i)})}var Yr,nt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",fu=(Qi.prototype.subscribe=function(e,t,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:i})},Qi.prototype[nt]=function(){return this},Qi);function Qi(e){this._subscribe=e}try{Yr={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Yr={indexedDB:null,IDBKeyRange:null}}function da(e){var t,i=!1,a=new fu(function(s){var l=Pt(e),d,h=!1,m={},g={},E={get closed(){return h},unsubscribe:function(){h||(h=!0,d&&d.abort(),p&&Ht.storagemutated.unsubscribe(_))}};s.start&&s.start(E);var p=!1,C=function(){return Pi(b)},_=function(w){Hr(m,w),$i(g,m)&&C()},b=function(){var w,S,O;!h&&Yr.indexedDB&&(m={},w={},d&&d.abort(),d=new AbortController,O=(function(P){var I=kn();try{l&&Cn();var K=Ft(e,P);return K=l?K.finally(Lt):K}finally{I&&Sn()}})(S={subscr:w,signal:d.signal,requery:C,querier:e,trans:null}),Promise.resolve(O).then(function(P){i=!0,t=P,h||S.signal.aborted||(m={},(function(I){for(var K in I)if(A(I,K))return;return 1})(g=w)||p||(Ht(rr,_),p=!0),Pi(function(){return!h&&s.next&&s.next(P)}))},function(P){i=!1,["DatabaseClosedError","AbortError"].includes(P?.name)||h||Pi(function(){h||s.error&&s.error(P)})}))};return setTimeout(C,0),E});return a.hasValue=function(){return i},a.getValue=function(){return t},a}var un=Tt;function Ji(e){var t=$t;try{$t=!0,Ht.storagemutated.fire(e),Yi(e,!0)}finally{$t=t}}j(un,u(u({},xr),{delete:function(e){return new un(e,{addons:[]}).delete()},exists:function(e){return new un(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=un.dependencies,i=t.indexedDB,t=t.IDBKeyRange,(Ni(i)?Promise.resolve(i.databases()).then(function(a){return a.map(function(s){return s.name}).filter(function(s){return s!==Dr})}):Li(i,t).toCollection().primaryKeys()).then(e)}catch{return Ae(new J.MissingAPI)}var t,i},defineClass:function(){return function(e){x(this,e)}},ignoreTransaction:function(e){return W.trans?rn(W.transless,e):e()},vip:Vi,async:function(e){return function(){try{var t=Wi(e.apply(this,arguments));return t&&typeof t.then=="function"?t:H.resolve(t)}catch(i){return Ae(i)}}},spawn:function(e,t,i){try{var a=Wi(e.apply(i,t||[]));return a&&typeof a.then=="function"?a:H.resolve(a)}catch(s){return Ae(s)}},currentTransaction:{get:function(){return W.trans||null}},waitFor:function(e,t){return t=H.resolve(typeof e=="function"?un.ignoreTransaction(e):e).timeout(t||6e4),W.trans?W.trans.waitFor(t):t},Promise:H,debug:{get:function(){return _t},set:function(e){jo(e)}},derive:M,extend:x,props:j,override:Q,Events:er,on:Ht,liveQuery:da,extendObservabilitySet:Hr,getByKeyPath:Z,setByKeyPath:Y,delByKeyPath:function(e,t){typeof t=="string"?Y(e,t,void 0):"length"in t&&[].map.call(t,function(i){Y(e,i,void 0)})},shallowClone:be,deepClone:me,getObjectDiff:Gi,cmp:de,asap:ue,minKey:-1/0,addons:[],connections:On,errnames:_i,dependencies:Yr,cache:sn,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,i){return e+t/Math.pow(10,2*i)})})),un.maxKey=ir(un.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ht(rr,function(e){$t||(e=new CustomEvent(ji,{detail:e}),$t=!0,dispatchEvent(e),$t=!1)}),addEventListener(ji,function(e){e=e.detail,$t||Ji(e)}));var Dn,$t=!1,ha=function(){};return typeof BroadcastChannel<"u"&&((ha=function(){(Dn=new BroadcastChannel(ji)).onmessage=function(e){return e.data&&Ji(e.data)}})(),typeof Dn.unref=="function"&&Dn.unref(),Ht(rr,function(e){$t||Dn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Tt.disableBfCache&&e.persisted){_t&&console.debug("Dexie: handling persisted pagehide"),Dn?.close();for(var t=0,i=On;t<i.length;t++)i[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Tt.disableBfCache&&e.persisted&&(_t&&console.debug("Dexie: handling persisted pageshow"),ha(),Ji({all:new Ve(-1/0,[[]])}))})),H.rejectionMapper=function(e,t){return!e||e instanceof Ze||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Io[e.name]?e:(t=new Io[e.name](t||e.message,e),"stack"in e&&D(t,"stack",{get:function(){return this.inner.stack}}),t)},jo(_t),u(Tt,Object.freeze({__proto__:null,Dexie:Tt,liveQuery:da,Entity:No,cmp:de,PropModification:Jn,replacePrefix:function(e,t){return new Jn({replacePrefix:[e,t]})},add:function(e){return new Jn({add:e})},remove:function(e){return new Jn({remove:e})},default:Tt,RangeSet:Ve,mergeRanges:sr,rangesOverlap:na}),{default:Tt}),Tt})})(Jr)),Jr.exports}var Fc=Bc();const go=Mc(Fc),Ra=Symbol.for("Dexie"),ai=globalThis[Ra]||(globalThis[Ra]=go);if(go.semVer!==ai.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${go.semVer} and ${ai.semVer}`);const{liveQuery:Ds,mergeRanges:pf,rangesOverlap:yf,RangeSet:mf,cmp:gf,Entity:_f,PropModification:bf,replacePrefix:wf,add:xf,remove:Ef,DexieYProvider:kf}=ai,wr=new ai("batteries");wr.version(1).stores({events:"++id, day, createdAt, customTimeAt, score, title"});async function Lc(){const n=Os(ft),r=new Date().toISOString();let o=null;if(n.customTime.isEnabled&&n.customTime.hours!==null&&n.customTime.minutes!==null){const f=new Date;f.setHours(n.customTime.hours),f.setMinutes(n.customTime.minutes),f.setSeconds(0),o=f.toISOString()}const u={title:n.title.trim(),score:Number(n.score),createdAt:r,customTimeAt:o,day:As()};try{const f=await wr.events.add(u);return Cc(),f}catch(f){throw f}}function Nc(n=As()){return Ao([],r=>{const o=Ds(async()=>{const u=await wr.events.where("day").equals(n).toArray();return u.sort((f,c)=>{const v=f.customTimeAt||f.createdAt,y=c.customTimeAt||c.createdAt;return new Date(v)-new Date(y)}),u}).subscribe({next:r,error:u=>console.error("[DB liveQuery error]",u)});return()=>o.unsubscribe()})}const Do=Nc(),Vc=br(Do,n=>{const r=Object.fromEntries(To.map(o=>[o.key,[]]));for(const o of n){const u=Ul(o.customTimeAt||o.createdAt);r[u].push(o)}return r});async function Hc(n){try{await wr.events.delete(n)}catch(r){console.error("[DB] Error deleting event",r)}}const $c=br(Do,n=>{let r=5;for(const o of n){const u=Number(o.score)||0;r+=u,r>5&&(r=5)}return r}),Uc=br(Do,n=>Array.isArray(n)&&n.length>0);var zc=xe("<span> </span>");function Yc(n,r){lt(r,!1);const o=Kt();let u=se(r,"score",8);function f(y){if(y>0)return"positive";if(y<0)return"negative"}yn(()=>St(u()),()=>{Le(o,f(u()))}),Yn();var c=zc(),v=te(c);je(()=>{_r(c,1,"score body-small-extra "+G(o),"svelte-myo9lu"),ut(v,u())}),he(n,c),ct()}var Wc=xe('<div class="event-item svelte-1oq0tcn"><div class="score-container svelte-1oq0tcn"><!></div> <div class="underlined-container svelte-1oq0tcn"><div class="description-container svelte-1oq0tcn"> </div> <div class="icon-button-container svelte-1oq0tcn"><!></div></div></div>');function Gc(n,r){lt(r,!1);let o=se(r,"id",8),u=se(r,"title",8),f=se(r,"score",8),c=se(r,"onDelete",8);xn();var v=Wc(),y=te(v),x=te(y);Yc(x,{get score(){return f()}});var k=_e(y,2),T=te(k),A=te(T),j=_e(T,2),q=te(j);mi(q,{name:"remove"}),je(()=>ut(A,u())),pt("click",j,()=>c()(o())),he(n,v),ct()}const Zc=["eventList","statistics"],Is="eventList",gi=pi({available:Zc,current:Is});function js(){return location.pathname.replace(/^\//,"")||Is}function Ks(n){return()=>{history.pushState({},"",`/${n}`),gi.update(r=>({...r,current:n}))}}window.addEventListener("popstate",()=>{const n=js();gi.update(r=>({...r,current:n}))});{const n=js();gi.update(r=>({...r,current:n}))}const Xc=br(ft,n=>{const r=n.title.trim().length>0,o=n.score!==0;return r&&o});var Qc=xe('<div class="day-period-container svelte-w1rmqp"><!></div>'),Jc=xe('<div class="day-period-container svelte-w1rmqp"><p>Добавь своё первое событие дня ⚡️</p></div>'),ef=xe("<!> <!>",1),tf=xe('<div class="day-period-container svelte-w1rmqp"><!></div> <div class="day-period-container svelte-w1rmqp"><!></div>',1),nf=xe('<section class="screen-title svelte-w1rmqp"><div class="heading-large">Today</div> <div class="body-small-extra date svelte-w1rmqp"> </div></section> <div class="battery-block svelte-w1rmqp"><!> <!></div> <!> <div class="screen-bottom-wrapper"><section class="screen-bottom svelte-w1rmqp"><!></section></div> <!>',1);function rf(n,r){lt(r,!1);const o=()=>Yt($c,"$currentDayBatteryLevel",y),u=()=>Yt(Uc,"$currentDayHasEvents",y),f=()=>Yt(Vc,"$currentDayEventsGrouped",y),c=()=>Yt(ft,"$createEventForm",y),v=()=>Yt(Xc,"$createEventFormIsValid",y),[y,x]=yi();xn();var k=nf(),T=it(k),A=_e(te(T),2),j=te(A),q=_e(T,2),D=te(q);Jl(D,{get score(){return o()}});var M=_e(D,2);{let Y=vr(()=>Ks("statistics"));Ln(M,{name:"metrics",variant:"secondary",get onClick(){return G(Y)}})}var $=_e(q,2);{var z=Y=>{var be=hn(),Ee=it(be);gn(Ee,1,()=>Object.entries(f()),mn,(Ke,Be)=>{var ie=ol(()=>mu(G(Be),2));let me=()=>G(ie)[0],X=()=>G(ie)[1];var ye=hn(),ve=it(ye);{var Oe=ge=>{var Ie=Qc(),Pe=te(Ie);Qr(Pe,{get title(){return me()},children:(Pt,Rt)=>{var Ze=hn(),mt=it(Ze);gn(mt,1,X,mn,(En,gt)=>{Gc(En,{get id(){return G(gt).id},get title(){return G(gt).title},get score(){return G(gt).score},get onDelete(){return Hc}})}),he(Pt,Ze)},$$slots:{default:!0}}),he(ge,Ie)};ot(ve,ge=>{X().length!==0&&ge(Oe)})}he(Ke,ye)}),he(Y,be)},ee=Y=>{var be=Jc();he(Y,be)};ot($,Y=>{u()?Y(z):Y(ee,!1)})}var Q=_e($,2),oe=te(Q),ue=te(oe);Ln(ue,{name:"plus",variant:"primary",get onClick(){return jc}});var Z=_e(Q,2);sc(Z,{get isOpen(){return c().isFormOpen},isHeader:!0,get onClose(){return Kc},get onAction(){return Lc},title:"Create Event",get isActionPossible(){return v()},children:(Y,be)=>{var Ee=tf(),Ke=it(Ee),Be=te(Ke);Qr(Be,{children:(X,ye)=>{var ve=ef(),Oe=it(ve);fc(Oe,{name:"Title",get onInput(){return Dc},isAutofocus:!0});var ge=_e(Oe,2);mc(ge,{get value(){return c().score},get onChange(){return Ic}}),he(X,ve)},$$slots:{default:!0}});var ie=_e(Ke,2),me=te(ie);Qr(me,{children:(X,ye)=>{Sc(X,{get isEnabled(){return c().customTime.isEnabled},get onIsEnabledToggle(){return Oc},get isExpanded(){return c().customTime.isExpanded},get onIsExpandedToggle(){return Pc},get hours(){return c().customTime.hours},get minutes(){return c().customTime.minutes},get hoursList(){return zl},get onHoursChange(){return Ac},get minutesList(){return Yl},get onMinutesChange(){return Tc}})},$$slots:{default:!0}}),he(Y,Ee)},$$slots:{default:!0}}),je(Y=>ut(j,Y),[()=>Gl()]),he(n,k),ct(),x()}function of({startDay:n,endDay:r,days:o=14}={}){return Ao([],u=>{if(!n||!r){const c=new Date,v=new Date;v.setDate(c.getDate()-(o-1)),n=v.toISOString().slice(0,10),r=c.toISOString().slice(0,10)}const f=Ds(async()=>{const c=await wr.events.where("day").between(n,r,!0,!0).toArray();return c.sort((v,y)=>new Date(v.day)-new Date(y.day)),console.log("eventList",c),c}).subscribe({next:u,error:c=>console.error("[DB liveQuery error]",c)});return()=>f.unsubscribe()})}const af=of({days:14}),sf=br(af,n=>{const r=new Map;for(const o of n){const u=o.day,f=Number(o.score)||0,c=r.get(u)||{day:u,count:0,sum:0};c.count+=1,c.sum+=f,r.set(u,c)}return Array.from(r.values()).map(({day:o,count:u,sum:f})=>({day:o,count:u,avg:u?Number((f/u).toFixed(1)):0})).sort((o,u)=>u.day.localeCompare(o.day))});var uf=xe('<div class="day-results svelte-3zchv7"><div class="result-block svelte-3zchv7"><div class="body-small-extra">Events</div> <div class="heading-medium"> </div></div> <div class="result-block svelte-3zchv7"><div class="body-small-extra">Average Score</div> <div class="heading-medium"> </div></div></div>'),lf=xe('<div class="day-period-container svelte-3zchv7"><!></div>'),cf=xe('<div class="day-period-container svelte-3zchv7"><!></div> <section class="screen-title svelte-3zchv7"><div class="heading-large">Statistics</div></section> <!>',1);function ff(n,r){lt(r,!1);const o=()=>Yt(sf,"$statisticsSummaryByDay",u),[u,f]=yi();xn();var c=cf(),v=it(c),y=te(v);{let k=vr(()=>Ks("eventList"));Ln(y,{name:"chevron_left",get onClick(){return G(k)},variant:"secondary"})}var x=_e(v,4);gn(x,1,o,mn,(k,T)=>{var A=lf(),j=te(A);Qr(j,{get title(){return G(T).day},children:(q,D)=>{var M=uf(),$=te(M),z=_e(te($),2),ee=te(z),Q=_e($,2),oe=_e(te(Q),2),ue=te(oe);je(()=>{ut(ee,G(T).count),ut(ue,G(T).avg)}),he(q,M)},$$slots:{default:!0}}),he(k,A)}),he(n,c),ct(),f()}var df=xe("<main><!></main>");function hf(n,r){lt(r,!1);const o=()=>Yt(gi,"$routes",u),[u,f]=yi();xn();var c=df(),v=te(c);{var y=k=>{rf(k,{})},x=k=>{var T=hn(),A=it(T);{var j=q=>{ff(q,{})};ot(A,q=>{o().current==="statistics"&&q(j)},!0)}he(k,T)};ot(v,k=>{o().current==="eventList"?k(y):k(x,!1)})}he(n,c),ct(),f()}kl(hf,{target:document.getElementById("app")});
